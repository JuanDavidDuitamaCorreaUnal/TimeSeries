<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>PIBQuarto</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="PIBQuarto - Descriptiva_files/libs/clipboard/clipboard.min.js"></script>
<script src="PIBQuarto - Descriptiva_files/libs/quarto-html/quarto.js"></script>
<script src="PIBQuarto - Descriptiva_files/libs/quarto-html/popper.min.js"></script>
<script src="PIBQuarto - Descriptiva_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="PIBQuarto - Descriptiva_files/libs/quarto-html/anchor.min.js"></script>
<link href="PIBQuarto - Descriptiva_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="PIBQuarto - Descriptiva_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="PIBQuarto - Descriptiva_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="PIBQuarto - Descriptiva_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="PIBQuarto - Descriptiva_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="PIBQuarto - Descriptiva_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<script src="PIBQuarto - Descriptiva_files/libs/plotly-binding-4.10.4/plotly.js"></script>

<script src="PIBQuarto - Descriptiva_files/libs/typedarray-0.1/typedarray.min.js"></script>

<script src="PIBQuarto - Descriptiva_files/libs/jquery-3.5.1/jquery.min.js"></script>

<link href="PIBQuarto - Descriptiva_files/libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">

<script src="PIBQuarto - Descriptiva_files/libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>

<link href="PIBQuarto - Descriptiva_files/libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">

<script src="PIBQuarto - Descriptiva_files/libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">PIBQuarto</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>El siguiente trabajo abarca todas las metodologías vistas en el semestre 2024-1 de la asignatura Series de Tiempo Univariadas, utilizando la medición trimestral del PIB en Colombia a precios constantes (calculando el agregado a partir de la suma de las actividades económicas de Colombia), a partir del primer trimestre de 2005, hasta el último trimestre del 2023.</p>
<section id="integrantes" class="level2">
<h2 class="anchored" data-anchor-id="integrantes">Integrantes</h2>
<ul>
<li>Ander Cristancho</li>
<li>Anderson Guarin</li>
<li>Juan David Duitama</li>
</ul>
</section>
<section id="librerías-utilizadas" class="level2">
<h2 class="anchored" data-anchor-id="librerías-utilizadas">Librerías utilizadas</h2>
<div class="cell" data-messages="false">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forecast)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(MASS)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(timetk)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(zoo)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tsibble)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(feasts)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fable)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cowplot)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(astsa)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(TSstudio)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fabletools)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(TSA)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modeltime)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="importación-de-datos" class="level2">
<h2 class="anchored" data-anchor-id="importación-de-datos">Importación de datos</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>PIB3 <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"C:/Users/ander/OneDrive - Universidad Nacional de Colombia/Documentos/(2024-01) Octavo Semestre/Series de Tiempo Univariadas/Proyecto/1. Bases de Datos/PIB.xlsx"</span>, <span class="at">range =</span> <span class="st">"AS18:AS93"</span>, <span class="at">col_names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
• `` -&gt; `...1`</code></pre>
</div>
</div>
</section>
<section id="visualización-de-datos" class="level2">
<h2 class="anchored" data-anchor-id="visualización-de-datos">Visualización de datos</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>PIB3TS <span class="ot">&lt;-</span> <span class="fu">ts</span>(PIB3, <span class="at">start =</span> <span class="fu">c</span>(<span class="dv">2005</span>, <span class="dv">1</span>), <span class="at">end =</span> <span class="fu">c</span>(<span class="dv">2023</span>, <span class="dv">4</span>), <span class="at">frequency =</span> <span class="dv">4</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Convirtiendo los datos originales en objeto serie de tiempo(ts)</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>( <span class="at">x =</span> <span class="fu">time</span>(PIB3TS), <span class="at">y =</span> PIB3TS, <span class="at">type =</span> <span class="st">'scatter'</span>, <span class="at">mode =</span> <span class="st">'lines'</span>,<span class="at">color=</span><span class="fu">I</span>(<span class="st">"red"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">'PIB Trimestral en Colombia'</span>,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">'Trimestre'</span>, <span class="at">rangeslider =</span> <span class="fu">list</span>(<span class="at">type =</span> <span class="st">'date'</span>)))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-97aa1a3ae54e684599e1" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-97aa1a3ae54e684599e1">{"x":{"visdat":{"3f284f422a6a":["function () ","plotlyVisDat"]},"cur_data":"3f284f422a6a","attrs":{"3f284f422a6a":{"x":[2005,2005.25,2005.5,2005.75,2006,2006.25,2006.5,2006.75,2007,2007.25,2007.5,2007.75,2008,2008.25,2008.5,2008.75,2009,2009.25,2009.5,2009.75,2010,2010.25,2010.5,2010.75,2011,2011.25,2011.5,2011.75,2012,2012.25,2012.5,2012.75,2013,2013.25,2013.5,2013.75,2014,2014.25,2014.5,2014.75,2015,2015.25,2015.5,2015.75,2016,2016.25,2016.5,2016.75,2017,2017.25,2017.5,2017.75,2018,2018.25,2018.5,2018.75,2019,2019.25,2019.5,2019.75,2020,2020.25,2020.5,2020.75,2021,2021.25,2021.5,2021.75,2022,2022.25,2022.5,2022.75,2023,2023.25,2023.5,2023.75],"y":[126125.790850045,128871.539452182,128599.726107945,131255.94347370201,134234.01358794299,135707.55791452501,138463.56652532599,141029.86197220799,143333.19357594699,144873.706349068,147970.382545325,150279.71752966,150671.656974171,151427.83278930199,152844.15441552299,150769.355821003,150869.15385853901,152212.085496983,153922.187590018,155612.57305446101,156676.06451802299,158933.49660038401,160397.55175458401,164143.88712700899,167191.45719997,169465.15426836599,173340.340965449,174631.04756621501,177252.095049803,177496.09745117399,177258.63484234799,179408.172656674,181495.600838146,187202.11193552901,188396.73195553801,190844.55527078701,193625.433772305,193703.875145567,196329.59031789401,197930.10076423601,199315.25482117399,200450.36873025601,203018.47407064901,201907.90237792101,204357.80308589799,204811.12290935899,205774.21399403,206545.86001071299,206777.55592230099,207407.74762712,209086.25485896401,209384.441591615,210421.58731912199,213111.95825521101,215063.77884092301,215410.675584743,217863.801212416,219554.72109193099,221838.84219456301,221966.63550109,219004.41319435299,182671.279204897,201846.81715103399,214377.49044971701,222122.233502016,216849.43983676101,228933.035104582,238338.29155664201,240084.04326739599,243197.794252858,245646.19980178899,243369.96267795601,246785.26105743201,243240.73191802701,244066.68231949699,244157.55145600101],"mode":"lines","color":["red"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"PIB Trimestral en Colombia","xaxis":{"domain":[0,1],"automargin":true,"title":"Trimestre","rangeslider":{"type":"date"}},"yaxis":{"domain":[0,1],"automargin":true,"title":[]},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[2005,2005.25,2005.5,2005.75,2006,2006.25,2006.5,2006.75,2007,2007.25,2007.5,2007.75,2008,2008.25,2008.5,2008.75,2009,2009.25,2009.5,2009.75,2010,2010.25,2010.5,2010.75,2011,2011.25,2011.5,2011.75,2012,2012.25,2012.5,2012.75,2013,2013.25,2013.5,2013.75,2014,2014.25,2014.5,2014.75,2015,2015.25,2015.5,2015.75,2016,2016.25,2016.5,2016.75,2017,2017.25,2017.5,2017.75,2018,2018.25,2018.5,2018.75,2019,2019.25,2019.5,2019.75,2020,2020.25,2020.5,2020.75,2021,2021.25,2021.5,2021.75,2022,2022.25,2022.5,2022.75,2023,2023.25,2023.5,2023.75],"y":[126125.790850045,128871.539452182,128599.726107945,131255.94347370201,134234.01358794299,135707.55791452501,138463.56652532599,141029.86197220799,143333.19357594699,144873.706349068,147970.382545325,150279.71752966,150671.656974171,151427.83278930199,152844.15441552299,150769.355821003,150869.15385853901,152212.085496983,153922.187590018,155612.57305446101,156676.06451802299,158933.49660038401,160397.55175458401,164143.88712700899,167191.45719997,169465.15426836599,173340.340965449,174631.04756621501,177252.095049803,177496.09745117399,177258.63484234799,179408.172656674,181495.600838146,187202.11193552901,188396.73195553801,190844.55527078701,193625.433772305,193703.875145567,196329.59031789401,197930.10076423601,199315.25482117399,200450.36873025601,203018.47407064901,201907.90237792101,204357.80308589799,204811.12290935899,205774.21399403,206545.86001071299,206777.55592230099,207407.74762712,209086.25485896401,209384.441591615,210421.58731912199,213111.95825521101,215063.77884092301,215410.675584743,217863.801212416,219554.72109193099,221838.84219456301,221966.63550109,219004.41319435299,182671.279204897,201846.81715103399,214377.49044971701,222122.233502016,216849.43983676101,228933.035104582,238338.29155664201,240084.04326739599,243197.794252858,245646.19980178899,243369.96267795601,246785.26105743201,243240.73191802701,244066.68231949699,244157.55145600101],"mode":"lines","type":"scatter","marker":{"color":"rgba(255,0,0,1)","line":{"color":"rgba(255,0,0,1)"}},"textfont":{"color":"rgba(255,0,0,1)"},"error_y":{"color":"rgba(255,0,0,1)"},"error_x":{"color":"rgba(255,0,0,1)"},"line":{"color":"rgba(255,0,0,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>La conclusión inicial con este primer gráfico es que se observa la tendencia creciente del PIB, se presentó una caída súbita a partir del año 2020, ya es sabido lo que ocurrió en ese periodo. Una vez llegado el tercer trimestre de 2021, el PIB consiguió seguir la tendencia creciente que se tenía desde antes de la pandemia.</p>
</section>
<section id="autocorrelación" class="level2">
<h2 class="anchored" data-anchor-id="autocorrelación">Autocorrelación</h2>
<p>A continuación, se presenta un primer gráfico de la autocorrelación, recordemos que éste no es válido, hasta que retiremos la tendencia y la estacionalidad.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(PIB3TS,<span class="at">lag.max =</span> <span class="fu">length</span>(PIB3TS))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="PIBQuarto---Descriptiva_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="análisis-descriptivo" class="level2">
<h2 class="anchored" data-anchor-id="análisis-descriptivo">Análisis descriptivo</h2>
<p>Como ya mencionamos anteriormente, el primer componente que se puede identificar en la serie de tiempo es la tendencia creciente del PIB, aparenta haber un ciclo en el que se tienen años con PIB con tendencia a aumentar, luego, se tienen otros años en los que su tendencia disminuye. Se puede observar esto desde 2001 hasta alrededor del segundo trimestre de 2008, luego desciende, hasta empezar a crecer de nuevo, para empezar a decrecer en 2012 y crecer nuevamente en 2013.</p>
<section id="estabilización-de-la-varianza-tranformación-box-cox" class="level3">
<h3 class="anchored" data-anchor-id="estabilización-de-la-varianza-tranformación-box-cox">Estabilización de la Varianza (Tranformación Box-Cox)</h3>
<p>Primero se recurre a realizar la estabilización de la varianza de la serie, a través de la <strong>Transformación Box-Cox</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>Lambda<span class="ot">&lt;-</span><span class="fu">BoxCox.lambda</span>(PIB3TS, <span class="at">method =</span><span class="st">"loglik"</span>, <span class="at">lower =</span> <span class="sc">-</span><span class="dv">3</span>, <span class="at">upper =</span> <span class="dv">3</span>)<span class="co">#Encontrando el valor de Lambda</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>Lambda</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.05</code></pre>
</div>
</div>
<p>El <span class="math inline">\(\lambda\)</span> resultante es cercano a 1, por lo que no será necesario realizar una transformación sobre los datos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>MASS<span class="sc">::</span><span class="fu">boxcox</span>(<span class="fu">lm</span>(PIB3TS <span class="sc">~</span> <span class="dv">1</span>),<span class="fu">seq</span>(<span class="sc">-</span><span class="dv">3</span>, <span class="dv">3</span>, <span class="at">length =</span> <span class="dv">50</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="PIBQuarto---Descriptiva_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Con el Boxcox, se confirma que <span class="math inline">\(\lambda\)</span> tiene un valor cercano a 1, pero que abarca el 0 en su intervalo de confianza.</p>
</section>
<section id="extracción-de-la-tendencia" class="level3">
<h3 class="anchored" data-anchor-id="extracción-de-la-tendencia">Extracción de la tendencia</h3>
<section id="estimación-mediante-un-modelo-lineal" class="level4">
<h4 class="anchored" data-anchor-id="estimación-mediante-un-modelo-lineal">Estimación mediante un modelo lineal</h4>
<p>A continucación, se realiza un modelo de regresión lineal simple utilizando como variable regresora el tiempo, y como variable de estudio, el PIB trimestral.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fitLM <span class="ot">&lt;-</span> <span class="fu">lm</span>(PIB3TS<span class="sc">~</span><span class="fu">time</span>(PIB3TS), <span class="at">na.action=</span><span class="cn">NULL</span>))<span class="co">#Creando un modelo de regresión lineal</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = PIB3TS ~ time(PIB3TS), na.action = NULL)

Residuals:
   Min     1Q Median     3Q    Max 
-41575  -2722    967   3974   7912 

Coefficients:
               Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  -1.217e+07  3.034e+05  -40.11   &lt;2e-16 ***
time(PIB3TS)  6.135e+03  1.506e+02   40.73   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 7201 on 74 degrees of freedom
Multiple R-squared:  0.9573,    Adjusted R-squared:  0.9567 
F-statistic:  1659 on 1 and 74 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(PIB3TS, <span class="at">ylab=</span><span class="st">"PIB trimestral en Colombia"</span>,<span class="at">xlab=</span><span class="st">"Trimestre"</span>) </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(fitLM,<span class="at">col =</span> <span class="st">"red"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="PIBQuarto---Descriptiva_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Haciendo una revisión meramente visual, el modelo lineal resultante logra capturar el comportamiento creciente del PIB trimestral, ignorando el suceso ocurrido en 2020 claramente. La serie resultante de extraer esta tendencia lineal es la siguiente.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>PIB3NoLM<span class="ot">=</span>PIB3TS<span class="sc">-</span><span class="fu">predict</span>(fitLM)<span class="co">#Eliminando la tendencia</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>( <span class="at">x =</span> <span class="fu">time</span>(PIB3NoLM), <span class="at">y =</span> PIB3NoLM, <span class="at">type =</span> <span class="st">'scatter'</span>, <span class="at">mode =</span> <span class="st">'lines'</span>,<span class="at">color=</span><span class="fu">I</span>(<span class="st">"red"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">'PIB trimestral en Colombia con tendencia lineal extraída'</span>,</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">'Trimestre'</span>, <span class="at">rangeslider =</span> <span class="fu">list</span>(<span class="at">type =</span> <span class="st">'date'</span>)))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-e8d1d70a184b80172e8b" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-e8d1d70a184b80172e8b">{"x":{"visdat":{"3f283631632f":["function () ","plotlyVisDat"]},"cur_data":"3f283631632f","attrs":{"3f283631632f":{"x":[2005,2005.25,2005.5,2005.75,2006,2006.25,2006.5,2006.75,2007,2007.25,2007.5,2007.75,2008,2008.25,2008.5,2008.75,2009,2009.25,2009.5,2009.75,2010,2010.25,2010.5,2010.75,2011,2011.25,2011.5,2011.75,2012,2012.25,2012.5,2012.75,2013,2013.25,2013.5,2013.75,2014,2014.25,2014.5,2014.75,2015,2015.25,2015.5,2015.75,2016,2016.25,2016.5,2016.75,2017,2017.25,2017.5,2017.75,2018,2018.25,2018.5,2018.75,2019,2019.25,2019.5,2019.75,2020,2020.25,2020.5,2020.75,2021,2021.25,2021.5,2021.75,2022,2022.25,2022.5,2022.75,2023,2023.25,2023.5,2023.75],"y":[-4566.4921813497058,-3354.4076901768713,-5159.8851453780371,-4037.3318905870547,-2592.9258873102372,-2653.04567169238,-1430.7011718555586,-398.06983593959012,371.59765683524893,378.44631899209344,1941.458404284931,2717.1292776539049,1575.4046112007345,797.91631536756177,680.57383062440204,-2927.8888748597528,-4361.7549482897739,-4552.48742080995,-4376.0494387391082,-4219.328085260262,-4689.5007326643099,-3965.7327612674562,-4035.3417180316173,-1822.670456570806,-308.76449457582203,431.26846285600914,2772.7910489748465,2529.8335387767002,3617.2169113986602,2327.5552018054877,556.42848201532615,1172.3021853771643,1726.0662558831391,5898.913242301991,5559.869151346822,6474.0283556316572,7721.2427461836196,6266.0200084814569,7358.0710698442999,7424.9174052221351,7276.4073511940951,6877.8571493119525,7912.2983787407866,5268.0625750486215,6184.2991720595746,5103.9548845564132,4533.3818582632521,3771.3637639820809,2469.3955646040558,1565.9231584588997,1710.7662793387426,475.28890102557489,-21.229482433467638,1135.4773426913889,1553.6338174392295,366.86645029505598,1286.3279670020274,1443.5837355528492,2194.0407272207085,788.16992278353428,-3707.7164949194994,-41574.514595339657,-23932.640760166832,-12935.631572447979,-6724.552631115017,-13531.010407334164,-2981.0792504773417,4890.5130906185077,5102.6006904083188,6682.6875649043068,7597.4290028711257,3787.5277680739819,5669.1620365858253,590.96878621479846,-116.74492327938788,-1559.539897739538],"mode":"lines","color":["red"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"PIB trimestral en Colombia con tendencia lineal extraída","xaxis":{"domain":[0,1],"automargin":true,"title":"Trimestre","rangeslider":{"type":"date"}},"yaxis":{"domain":[0,1],"automargin":true,"title":[]},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[2005,2005.25,2005.5,2005.75,2006,2006.25,2006.5,2006.75,2007,2007.25,2007.5,2007.75,2008,2008.25,2008.5,2008.75,2009,2009.25,2009.5,2009.75,2010,2010.25,2010.5,2010.75,2011,2011.25,2011.5,2011.75,2012,2012.25,2012.5,2012.75,2013,2013.25,2013.5,2013.75,2014,2014.25,2014.5,2014.75,2015,2015.25,2015.5,2015.75,2016,2016.25,2016.5,2016.75,2017,2017.25,2017.5,2017.75,2018,2018.25,2018.5,2018.75,2019,2019.25,2019.5,2019.75,2020,2020.25,2020.5,2020.75,2021,2021.25,2021.5,2021.75,2022,2022.25,2022.5,2022.75,2023,2023.25,2023.5,2023.75],"y":[-4566.4921813497058,-3354.4076901768713,-5159.8851453780371,-4037.3318905870547,-2592.9258873102372,-2653.04567169238,-1430.7011718555586,-398.06983593959012,371.59765683524893,378.44631899209344,1941.458404284931,2717.1292776539049,1575.4046112007345,797.91631536756177,680.57383062440204,-2927.8888748597528,-4361.7549482897739,-4552.48742080995,-4376.0494387391082,-4219.328085260262,-4689.5007326643099,-3965.7327612674562,-4035.3417180316173,-1822.670456570806,-308.76449457582203,431.26846285600914,2772.7910489748465,2529.8335387767002,3617.2169113986602,2327.5552018054877,556.42848201532615,1172.3021853771643,1726.0662558831391,5898.913242301991,5559.869151346822,6474.0283556316572,7721.2427461836196,6266.0200084814569,7358.0710698442999,7424.9174052221351,7276.4073511940951,6877.8571493119525,7912.2983787407866,5268.0625750486215,6184.2991720595746,5103.9548845564132,4533.3818582632521,3771.3637639820809,2469.3955646040558,1565.9231584588997,1710.7662793387426,475.28890102557489,-21.229482433467638,1135.4773426913889,1553.6338174392295,366.86645029505598,1286.3279670020274,1443.5837355528492,2194.0407272207085,788.16992278353428,-3707.7164949194994,-41574.514595339657,-23932.640760166832,-12935.631572447979,-6724.552631115017,-13531.010407334164,-2981.0792504773417,4890.5130906185077,5102.6006904083188,6682.6875649043068,7597.4290028711257,3787.5277680739819,5669.1620365858253,590.96878621479846,-116.74492327938788,-1559.539897739538],"mode":"lines","type":"scatter","marker":{"color":"rgba(255,0,0,1)","line":{"color":"rgba(255,0,0,1)"}},"textfont":{"color":"rgba(255,0,0,1)"},"error_y":{"color":"rgba(255,0,0,1)"},"error_x":{"color":"rgba(255,0,0,1)"},"line":{"color":"rgba(255,0,0,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Al realizar la extracción respectiva, la serie resultante no es adecuada para continuar con el análisis, puesto que el valle resultante de la extracción en años de pandemia perjudica los próximos procedimientos. Lo cual provocaría que al realizar predicciones bajo el modelo lineal, éstas sean subajustadas.</p>
</section>
<section id="estimación-no-paramétrica" class="level4">
<h4 class="anchored" data-anchor-id="estimación-no-paramétrica">Estimación no paramétrica</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>indice1<span class="ot">=</span><span class="fu">as.Date</span>(<span class="fu">as.yearmon</span>(<span class="fu">tk_index</span>(PIB3TS)))<span class="co">#Convirtiendo en fecha el indice de DesempleoTSBox, deja como primero de enero cada fecha</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>indice1<span class="fl">.1</span><span class="ot">=</span><span class="fu">yearmon</span>(<span class="fu">as.yearmon</span>(<span class="fu">tk_index</span>(PIB3TS)))<span class="co">#Dejando esa fecha solo como año y mes</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Haciendo el objeto tsibble</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>df<span class="ot">=</span><span class="fu">data.frame</span>(<span class="at">Fecha=</span>indice1,<span class="at">PIB=</span><span class="fu">as.matrix</span>(PIB3TS))</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df)[<span class="dv">2</span>]<span class="ot">&lt;-</span><span class="st">"PIB"</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>PIB3TSibble<span class="ot">=</span><span class="fu">as_tsibble</span>(df)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Using `Fecha` as index variable.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>PIB3TSibble</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tsibble: 76 x 2 [1D]
   Fecha          PIB
   &lt;date&gt;       &lt;dbl&gt;
 1 2005-01-01 126126.
 2 2005-04-01 128872.
 3 2005-07-01 128600.
 4 2005-10-01 131256.
 5 2006-01-01 134234.
 6 2006-04-01 135708.
 7 2006-07-01 138464.
 8 2006-10-01 141030.
 9 2007-01-01 143333.
10 2007-04-01 144874.
# ℹ 66 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>pib3TSibble <span class="ot">&lt;-</span> <span class="fu">tsibble</span>(</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">periodo =</span> <span class="fu">seq</span>(<span class="fu">as.Date</span>(<span class="st">"2005-01-01"</span>), <span class="fu">as.Date</span>(<span class="st">"2023-12-01"</span>), <span class="at">by =</span> <span class="st">"3 months"</span>),</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">valor =</span> PIB3</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Using `periodo` as index variable.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="do">####Primera aproximación del ajuste STL</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>df<span class="sc">%&gt;%</span>timetk<span class="sc">::</span><span class="fu">plot_time_series</span>(Fecha, PIB, </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">.interactive =</span> <span class="cn">TRUE</span>,</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>                   <span class="at">.plotly_slider =</span> <span class="cn">TRUE</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-d0ac21abc69860edd2e6" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-d0ac21abc69860edd2e6">{"x":{"data":[{"x":["2005-01-01","2005-04-01","2005-07-01","2005-10-01","2006-01-01","2006-04-01","2006-07-01","2006-10-01","2007-01-01","2007-04-01","2007-07-01","2007-10-01","2008-01-01","2008-04-01","2008-07-01","2008-10-01","2009-01-01","2009-04-01","2009-07-01","2009-10-01","2010-01-01","2010-04-01","2010-07-01","2010-10-01","2011-01-01","2011-04-01","2011-07-01","2011-10-01","2012-01-01","2012-04-01","2012-07-01","2012-10-01","2013-01-01","2013-04-01","2013-07-01","2013-10-01","2014-01-01","2014-04-01","2014-07-01","2014-10-01","2015-01-01","2015-04-01","2015-07-01","2015-10-01","2016-01-01","2016-04-01","2016-07-01","2016-10-01","2017-01-01","2017-04-01","2017-07-01","2017-10-01","2018-01-01","2018-04-01","2018-07-01","2018-10-01","2019-01-01","2019-04-01","2019-07-01","2019-10-01","2020-01-01","2020-04-01","2020-07-01","2020-10-01","2021-01-01","2021-04-01","2021-07-01","2021-10-01","2022-01-01","2022-04-01","2022-07-01","2022-10-01","2023-01-01","2023-04-01","2023-07-01","2023-10-01"],"y":[126125.790850045,128871.539452182,128599.726107945,131255.94347370201,134234.01358794299,135707.55791452501,138463.56652532599,141029.86197220799,143333.19357594699,144873.706349068,147970.382545325,150279.71752966,150671.656974171,151427.83278930199,152844.15441552299,150769.355821003,150869.15385853901,152212.085496983,153922.187590018,155612.57305446101,156676.06451802299,158933.49660038401,160397.55175458401,164143.88712700899,167191.45719997,169465.15426836599,173340.340965449,174631.04756621501,177252.095049803,177496.09745117399,177258.63484234799,179408.172656674,181495.600838146,187202.11193552901,188396.73195553801,190844.55527078701,193625.433772305,193703.875145567,196329.59031789401,197930.10076423601,199315.25482117399,200450.36873025601,203018.47407064901,201907.90237792101,204357.80308589799,204811.12290935899,205774.21399403,206545.86001071299,206777.55592230099,207407.74762712,209086.25485896401,209384.441591615,210421.58731912199,213111.95825521101,215063.77884092301,215410.675584743,217863.801212416,219554.72109193099,221838.84219456301,221966.63550109,219004.41319435299,182671.279204897,201846.81715103399,214377.49044971701,222122.233502016,216849.43983676101,228933.035104582,238338.29155664201,240084.04326739599,243197.794252858,245646.19980178899,243369.96267795601,246785.26105743201,243240.73191802701,244066.68231949699,244157.55145600101],"text":["Fecha: 2005-01-01<br />.value: 126125.8","Fecha: 2005-04-01<br />.value: 128871.5","Fecha: 2005-07-01<br />.value: 128599.7","Fecha: 2005-10-01<br />.value: 131255.9","Fecha: 2006-01-01<br />.value: 134234.0","Fecha: 2006-04-01<br />.value: 135707.6","Fecha: 2006-07-01<br />.value: 138463.6","Fecha: 2006-10-01<br />.value: 141029.9","Fecha: 2007-01-01<br />.value: 143333.2","Fecha: 2007-04-01<br />.value: 144873.7","Fecha: 2007-07-01<br />.value: 147970.4","Fecha: 2007-10-01<br />.value: 150279.7","Fecha: 2008-01-01<br />.value: 150671.7","Fecha: 2008-04-01<br />.value: 151427.8","Fecha: 2008-07-01<br />.value: 152844.2","Fecha: 2008-10-01<br />.value: 150769.4","Fecha: 2009-01-01<br />.value: 150869.2","Fecha: 2009-04-01<br />.value: 152212.1","Fecha: 2009-07-01<br />.value: 153922.2","Fecha: 2009-10-01<br />.value: 155612.6","Fecha: 2010-01-01<br />.value: 156676.1","Fecha: 2010-04-01<br />.value: 158933.5","Fecha: 2010-07-01<br />.value: 160397.6","Fecha: 2010-10-01<br />.value: 164143.9","Fecha: 2011-01-01<br />.value: 167191.5","Fecha: 2011-04-01<br />.value: 169465.2","Fecha: 2011-07-01<br />.value: 173340.3","Fecha: 2011-10-01<br />.value: 174631.0","Fecha: 2012-01-01<br />.value: 177252.1","Fecha: 2012-04-01<br />.value: 177496.1","Fecha: 2012-07-01<br />.value: 177258.6","Fecha: 2012-10-01<br />.value: 179408.2","Fecha: 2013-01-01<br />.value: 181495.6","Fecha: 2013-04-01<br />.value: 187202.1","Fecha: 2013-07-01<br />.value: 188396.7","Fecha: 2013-10-01<br />.value: 190844.6","Fecha: 2014-01-01<br />.value: 193625.4","Fecha: 2014-04-01<br />.value: 193703.9","Fecha: 2014-07-01<br />.value: 196329.6","Fecha: 2014-10-01<br />.value: 197930.1","Fecha: 2015-01-01<br />.value: 199315.3","Fecha: 2015-04-01<br />.value: 200450.4","Fecha: 2015-07-01<br />.value: 203018.5","Fecha: 2015-10-01<br />.value: 201907.9","Fecha: 2016-01-01<br />.value: 204357.8","Fecha: 2016-04-01<br />.value: 204811.1","Fecha: 2016-07-01<br />.value: 205774.2","Fecha: 2016-10-01<br />.value: 206545.9","Fecha: 2017-01-01<br />.value: 206777.6","Fecha: 2017-04-01<br />.value: 207407.7","Fecha: 2017-07-01<br />.value: 209086.3","Fecha: 2017-10-01<br />.value: 209384.4","Fecha: 2018-01-01<br />.value: 210421.6","Fecha: 2018-04-01<br />.value: 213112.0","Fecha: 2018-07-01<br />.value: 215063.8","Fecha: 2018-10-01<br />.value: 215410.7","Fecha: 2019-01-01<br />.value: 217863.8","Fecha: 2019-04-01<br />.value: 219554.7","Fecha: 2019-07-01<br />.value: 221838.8","Fecha: 2019-10-01<br />.value: 221966.6","Fecha: 2020-01-01<br />.value: 219004.4","Fecha: 2020-04-01<br />.value: 182671.3","Fecha: 2020-07-01<br />.value: 201846.8","Fecha: 2020-10-01<br />.value: 214377.5","Fecha: 2021-01-01<br />.value: 222122.2","Fecha: 2021-04-01<br />.value: 216849.4","Fecha: 2021-07-01<br />.value: 228933.0","Fecha: 2021-10-01<br />.value: 238338.3","Fecha: 2022-01-01<br />.value: 240084.0","Fecha: 2022-04-01<br />.value: 243197.8","Fecha: 2022-07-01<br />.value: 245646.2","Fecha: 2022-10-01<br />.value: 243370.0","Fecha: 2023-01-01<br />.value: 246785.3","Fecha: 2023-04-01<br />.value: 243240.7","Fecha: 2023-07-01<br />.value: 244066.7","Fecha: 2023-10-01<br />.value: 244157.6"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(44,62,80,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":["2005-01-01","2005-04-01","2005-07-01","2005-10-01","2006-01-01","2006-04-01","2006-07-01","2006-10-01","2007-01-01","2007-04-01","2007-07-01","2007-10-01","2008-01-01","2008-04-01","2008-07-01","2008-10-01","2009-01-01","2009-04-01","2009-07-01","2009-10-01","2010-01-01","2010-04-01","2010-07-01","2010-10-01","2011-01-01","2011-04-01","2011-07-01","2011-10-01","2012-01-01","2012-04-01","2012-07-01","2012-10-01","2013-01-01","2013-04-01","2013-07-01","2013-10-01","2014-01-01","2014-04-01","2014-07-01","2014-10-01","2015-01-01","2015-04-01","2015-07-01","2015-10-01","2016-01-01","2016-04-01","2016-07-01","2016-10-01","2017-01-01","2017-04-01","2017-07-01","2017-10-01","2018-01-01","2018-04-01","2018-07-01","2018-10-01","2019-01-01","2019-04-01","2019-07-01","2019-10-01","2020-01-01","2020-04-01","2020-07-01","2020-10-01","2021-01-01","2021-04-01","2021-07-01","2021-10-01","2022-01-01","2022-04-01","2022-07-01","2022-10-01","2023-01-01","2023-04-01","2023-07-01","2023-10-01"],"y":[128203.88407692476,129728.38032825213,131262.49022997817,132806.77188193941,134361.7833839723,135928.08283591334,137506.22833759914,139096.77798886609,140700.28988955074,142317.32213948958,143950.48165105577,145600.70698939209,147266.05373348939,148944.57746233846,150634.3337549303,152333.37819025569,154039.76634730553,155751.5538050707,157466.79614254204,159192.30739183474,160934.90317177461,162692.6414414187,164463.58015982405,166245.77728604755,168037.29077914634,169836.1785981773,171640.49870219751,173448.30905026387,175257.6676014335,177139.3535650344,179139.26424162855,181218.13472712395,183336.70011742855,185455.6955084503,187535.85599609712,189537.91667627697,191422.61264489792,193150.6789978678,194744.46105739218,196257.68102559488,197698.13931826124,199073.63635117686,200391.97254012706,201660.94830089735,202888.36404927308,204082.02020103979,205249.71717198275,206399.25537788757,207461.76194517853,208392.75189246956,209236.60747383063,210037.71094333156,210840.44455504217,211689.1905630324,212628.33122137212,213702.24878413117,214955.32550537947,216314.75381160202,217682.05197204059,219063.09100489999,220463.7419283854,221889.8757607016,223347.36352005365,224842.0762246465,226379.88489268508,227966.66054237427,229608.27419191919,231306.66864336786,233058.0659017525,234859.75578975471,236709.02813005584,238603.17274533733,240539.47945828055,242515.23809156695,244527.73846787791,246574.27040989487],"text":["Fecha: 2005-01-01<br />.value_smooth: 128203.9","Fecha: 2005-04-01<br />.value_smooth: 129728.4","Fecha: 2005-07-01<br />.value_smooth: 131262.5","Fecha: 2005-10-01<br />.value_smooth: 132806.8","Fecha: 2006-01-01<br />.value_smooth: 134361.8","Fecha: 2006-04-01<br />.value_smooth: 135928.1","Fecha: 2006-07-01<br />.value_smooth: 137506.2","Fecha: 2006-10-01<br />.value_smooth: 139096.8","Fecha: 2007-01-01<br />.value_smooth: 140700.3","Fecha: 2007-04-01<br />.value_smooth: 142317.3","Fecha: 2007-07-01<br />.value_smooth: 143950.5","Fecha: 2007-10-01<br />.value_smooth: 145600.7","Fecha: 2008-01-01<br />.value_smooth: 147266.1","Fecha: 2008-04-01<br />.value_smooth: 148944.6","Fecha: 2008-07-01<br />.value_smooth: 150634.3","Fecha: 2008-10-01<br />.value_smooth: 152333.4","Fecha: 2009-01-01<br />.value_smooth: 154039.8","Fecha: 2009-04-01<br />.value_smooth: 155751.6","Fecha: 2009-07-01<br />.value_smooth: 157466.8","Fecha: 2009-10-01<br />.value_smooth: 159192.3","Fecha: 2010-01-01<br />.value_smooth: 160934.9","Fecha: 2010-04-01<br />.value_smooth: 162692.6","Fecha: 2010-07-01<br />.value_smooth: 164463.6","Fecha: 2010-10-01<br />.value_smooth: 166245.8","Fecha: 2011-01-01<br />.value_smooth: 168037.3","Fecha: 2011-04-01<br />.value_smooth: 169836.2","Fecha: 2011-07-01<br />.value_smooth: 171640.5","Fecha: 2011-10-01<br />.value_smooth: 173448.3","Fecha: 2012-01-01<br />.value_smooth: 175257.7","Fecha: 2012-04-01<br />.value_smooth: 177139.4","Fecha: 2012-07-01<br />.value_smooth: 179139.3","Fecha: 2012-10-01<br />.value_smooth: 181218.1","Fecha: 2013-01-01<br />.value_smooth: 183336.7","Fecha: 2013-04-01<br />.value_smooth: 185455.7","Fecha: 2013-07-01<br />.value_smooth: 187535.9","Fecha: 2013-10-01<br />.value_smooth: 189537.9","Fecha: 2014-01-01<br />.value_smooth: 191422.6","Fecha: 2014-04-01<br />.value_smooth: 193150.7","Fecha: 2014-07-01<br />.value_smooth: 194744.5","Fecha: 2014-10-01<br />.value_smooth: 196257.7","Fecha: 2015-01-01<br />.value_smooth: 197698.1","Fecha: 2015-04-01<br />.value_smooth: 199073.6","Fecha: 2015-07-01<br />.value_smooth: 200392.0","Fecha: 2015-10-01<br />.value_smooth: 201660.9","Fecha: 2016-01-01<br />.value_smooth: 202888.4","Fecha: 2016-04-01<br />.value_smooth: 204082.0","Fecha: 2016-07-01<br />.value_smooth: 205249.7","Fecha: 2016-10-01<br />.value_smooth: 206399.3","Fecha: 2017-01-01<br />.value_smooth: 207461.8","Fecha: 2017-04-01<br />.value_smooth: 208392.8","Fecha: 2017-07-01<br />.value_smooth: 209236.6","Fecha: 2017-10-01<br />.value_smooth: 210037.7","Fecha: 2018-01-01<br />.value_smooth: 210840.4","Fecha: 2018-04-01<br />.value_smooth: 211689.2","Fecha: 2018-07-01<br />.value_smooth: 212628.3","Fecha: 2018-10-01<br />.value_smooth: 213702.2","Fecha: 2019-01-01<br />.value_smooth: 214955.3","Fecha: 2019-04-01<br />.value_smooth: 216314.8","Fecha: 2019-07-01<br />.value_smooth: 217682.1","Fecha: 2019-10-01<br />.value_smooth: 219063.1","Fecha: 2020-01-01<br />.value_smooth: 220463.7","Fecha: 2020-04-01<br />.value_smooth: 221889.9","Fecha: 2020-07-01<br />.value_smooth: 223347.4","Fecha: 2020-10-01<br />.value_smooth: 224842.1","Fecha: 2021-01-01<br />.value_smooth: 226379.9","Fecha: 2021-04-01<br />.value_smooth: 227966.7","Fecha: 2021-07-01<br />.value_smooth: 229608.3","Fecha: 2021-10-01<br />.value_smooth: 231306.7","Fecha: 2022-01-01<br />.value_smooth: 233058.1","Fecha: 2022-04-01<br />.value_smooth: 234859.8","Fecha: 2022-07-01<br />.value_smooth: 236709.0","Fecha: 2022-10-01<br />.value_smooth: 238603.2","Fecha: 2023-01-01<br />.value_smooth: 240539.5","Fecha: 2023-04-01<br />.value_smooth: 242515.2","Fecha: 2023-07-01<br />.value_smooth: 244527.7","Fecha: 2023-10-01<br />.value_smooth: 246574.3"],"type":"scatter","mode":"lines","line":{"width":3.7795275590551185,"color":"rgba(51,102,255,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":25.570776255707766,"l":46.027397260273986},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(44,62,80,1)","family":"","size":14.611872146118724},"title":{"text":"Time Series Plot","font":{"color":"rgba(44,62,80,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"date","autorange":true,"range":["2004-01-24","2024-09-07"],"tickmode":"auto","ticktext":["2005","2010","2015","2020"],"tickvals":[12784,14610,16436,18262],"categoryorder":"array","categoryarray":["2005","2010","2015","2020"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.6529680365296811,"tickwidth":0.22139200221392005,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392005,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(44,62,80,1)","family":"","size":14.611872146118724}},"hoverformat":".2f","rangeslider":{"type":"date"}},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":true,"range":[120092.81733967565,252818.23456780135],"tickmode":"auto","ticktext":["125000","150000","175000","200000","225000","250000"],"tickvals":[125000,150000,175000,200000,225000,250000],"categoryorder":"array","categoryarray":["125000","150000","175000","200000","225000","250000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.6529680365296811,"tickwidth":0.22139200221392005,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392005,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(44,62,80,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(44,62,80,1)","width":0.33208800332088001,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(44,62,80,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"3f283cb639b9":{"x":{},"y":{},"type":"scatter"},"3f285b083545":{"x":{},"y":{}}},"cur_data":"3f283cb639b9","visdat":{"3f283cb639b9":["function (y) ","x"],"3f285b083545":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Creando una nueva columna con los datos ajustados por una regresión STL de grado 2 y utilizando el 20% de los datos, entre más pequeño, la curva es menos suave</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="do">###Ajuste STL moviendo los parámetros</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>df<span class="sc">%&gt;%</span><span class="fu">mutate</span>(<span class="at">PIBmod=</span><span class="fu">smooth_vec</span>(PIB,<span class="at">span =</span> <span class="fl">0.1</span>, <span class="at">degree =</span> <span class="dv">2</span>))<span class="sc">%&gt;%</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(Fecha, PIB)) <span class="sc">+</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> PIBmod), <span class="at">color =</span> <span class="st">"red"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="PIBQuarto---Descriptiva_files/figure-html/unnamed-chunk-9-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>En este caso, la estimación no paramétrica gráficamente logra captar el comportamiento de la serie, incluyendo el periodo de pandemia.</p>
<p>Ahoa bien, vamos a ver una serie de tiempo con tendencia estimada por métodos no paramétricos extraída, con el fin de observar si la estimación no paramétrica describe mejor el comportamiento del PIB trimestral.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>STLextra<span class="ot">&lt;-</span>PIB3TS<span class="sc">-</span><span class="fu">smooth_vec</span>(PIB3TS,<span class="at">span =</span> <span class="fl">0.1</span>, <span class="at">degree =</span> <span class="dv">2</span>)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>( <span class="at">x =</span> <span class="fu">time</span>(STLextra), <span class="at">y =</span> STLextra, <span class="at">type =</span> <span class="st">'scatter'</span>, <span class="at">mode =</span> <span class="st">'lines'</span>,<span class="at">color=</span><span class="fu">I</span>(<span class="st">"red"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">'PIB Trimestral con tendencia STL extraída'</span>,</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">'Trimestre'</span>, <span class="at">rangeslider =</span> <span class="fu">list</span>(<span class="at">type =</span> <span class="st">'date'</span>)))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-d4a9a1c0d3d1ee96bce4" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-d4a9a1c0d3d1ee96bce4">{"x":{"visdat":{"3f28281f1db7":["function () ","plotlyVisDat"]},"cur_data":"3f28281f1db7","attrs":{"3f28281f1db7":{"x":[2005,2005.25,2005.5,2005.75,2006,2006.25,2006.5,2006.75,2007,2007.25,2007.5,2007.75,2008,2008.25,2008.5,2008.75,2009,2009.25,2009.5,2009.75,2010,2010.25,2010.5,2010.75,2011,2011.25,2011.5,2011.75,2012,2012.25,2012.5,2012.75,2013,2013.25,2013.5,2013.75,2014,2014.25,2014.5,2014.75,2015,2015.25,2015.5,2015.75,2016,2016.25,2016.5,2016.75,2017,2017.25,2017.5,2017.75,2018,2018.25,2018.5,2018.75,2019,2019.25,2019.5,2019.75,2020,2020.25,2020.5,2020.75,2021,2021.25,2021.5,2021.75,2022,2022.25,2022.5,2022.75,2023,2023.25,2023.5,2023.75],"y":[-384.46359604402096,1062.6527472154849,-816.35823843211983,60.312842546351021,356.81659336062148,-329.42124815302668,108.19865622205543,-32.995303197443718,218.02027696301229,-360.61559992455295,93.853156250930624,263.87361700637848,-153.5838098571985,-343.96254384360509,759.28517480319715,-510.25258373763063,4.2925856396032032,37.827121474401793,-17.03814223135123,187.79227094646194,-294.53789596108254,391.59094705979805,-468.44988883740734,224.7569875518675,189.52929031991516,-507.47999106545467,626.54792802687734,-589.5323237303528,433.35606233213912,75.246890039590653,-411.28280271182302,474.1424060286954,-913.60075117668021,1074.7781494861993,-517.06370133132441,-163.60927932328195,640.81113980707596,-682.34382592019392,338.94688992356532,-65.319529120199149,132.85505391159677,-525.52959203152568,955.2622263939702,-989.71009041505749,623.65639974092483,-248.08632334379945,27.280118364025839,99.537992217869032,-22.3235153167916,-238.10022359562572,351.7541867372347,-93.200602460361551,-255.70264660537941,117.9807675164775,354.04439784461283,-508.89190658464213,326.68899882820551,-317.49235765513731,140.44450527481968,-2269.831822027656,9216.3536101328791,-11681.512580889161,4950.9834938047861,-780.44325635264977,2985.9080483239668,-3898.8092021571065,1164.3033765808505,1083.4872109222051,-855.49079162545968,-156.69536507918383,1119.5918346767721,-1784.136965179845,1854.8393915155611,-1238.8700706493983,-101.870333627332,176.81212666133069],"mode":"lines","color":["red"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"PIB Trimestral con tendencia STL extraída","xaxis":{"domain":[0,1],"automargin":true,"title":"Trimestre","rangeslider":{"type":"date"}},"yaxis":{"domain":[0,1],"automargin":true,"title":[]},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[2005,2005.25,2005.5,2005.75,2006,2006.25,2006.5,2006.75,2007,2007.25,2007.5,2007.75,2008,2008.25,2008.5,2008.75,2009,2009.25,2009.5,2009.75,2010,2010.25,2010.5,2010.75,2011,2011.25,2011.5,2011.75,2012,2012.25,2012.5,2012.75,2013,2013.25,2013.5,2013.75,2014,2014.25,2014.5,2014.75,2015,2015.25,2015.5,2015.75,2016,2016.25,2016.5,2016.75,2017,2017.25,2017.5,2017.75,2018,2018.25,2018.5,2018.75,2019,2019.25,2019.5,2019.75,2020,2020.25,2020.5,2020.75,2021,2021.25,2021.5,2021.75,2022,2022.25,2022.5,2022.75,2023,2023.25,2023.5,2023.75],"y":[-384.46359604402096,1062.6527472154849,-816.35823843211983,60.312842546351021,356.81659336062148,-329.42124815302668,108.19865622205543,-32.995303197443718,218.02027696301229,-360.61559992455295,93.853156250930624,263.87361700637848,-153.5838098571985,-343.96254384360509,759.28517480319715,-510.25258373763063,4.2925856396032032,37.827121474401793,-17.03814223135123,187.79227094646194,-294.53789596108254,391.59094705979805,-468.44988883740734,224.7569875518675,189.52929031991516,-507.47999106545467,626.54792802687734,-589.5323237303528,433.35606233213912,75.246890039590653,-411.28280271182302,474.1424060286954,-913.60075117668021,1074.7781494861993,-517.06370133132441,-163.60927932328195,640.81113980707596,-682.34382592019392,338.94688992356532,-65.319529120199149,132.85505391159677,-525.52959203152568,955.2622263939702,-989.71009041505749,623.65639974092483,-248.08632334379945,27.280118364025839,99.537992217869032,-22.3235153167916,-238.10022359562572,351.7541867372347,-93.200602460361551,-255.70264660537941,117.9807675164775,354.04439784461283,-508.89190658464213,326.68899882820551,-317.49235765513731,140.44450527481968,-2269.831822027656,9216.3536101328791,-11681.512580889161,4950.9834938047861,-780.44325635264977,2985.9080483239668,-3898.8092021571065,1164.3033765808505,1083.4872109222051,-855.49079162545968,-156.69536507918383,1119.5918346767721,-1784.136965179845,1854.8393915155611,-1238.8700706493983,-101.870333627332,176.81212666133069],"mode":"lines","type":"scatter","marker":{"color":"rgba(255,0,0,1)","line":{"color":"rgba(255,0,0,1)"}},"textfont":{"color":"rgba(255,0,0,1)"},"error_y":{"color":"rgba(255,0,0,1)"},"error_x":{"color":"rgba(255,0,0,1)"},"line":{"color":"rgba(255,0,0,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Note que la componente de error sigue teniendo un pico muy bajo en los meses en que ocurrió la pandemia. Sin embargo, si no tuviésemos en cuenta el periodo de pandemia, el modelo no paramétrico tiene componente de error muy bajos en años anteriores, lo cual es un buen indicador.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>tsibblePIB<span class="ot">&lt;-</span><span class="fu">as_tsibble</span>(PIB3TS)<span class="co">#Creando el objeto tsibble del PIB</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>tsibblePIB</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tsibble: 76 x 2 [1Q]
     index   value
     &lt;qtr&gt;   &lt;dbl&gt;
 1 2005 Q1 126126.
 2 2005 Q2 128872.
 3 2005 Q3 128600.
 4 2005 Q4 131256.
 5 2006 Q1 134234.
 6 2006 Q2 135708.
 7 2006 Q3 138464.
 8 2006 Q4 141030.
 9 2007 Q1 143333.
10 2007 Q2 144874.
# ℹ 66 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>tsibblePIB <span class="sc">%&gt;%</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model</span>(</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">STL</span>(value <span class="sc">~</span> <span class="fu">trend</span>() <span class="sc">+</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">season</span>(<span class="at">window =</span> <span class="st">"periodic"</span>),</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">robust =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">components</span>() <span class="sc">%&gt;%</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="PIBQuarto---Descriptiva_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Según el gráfico anterior, como el PIB está indicando que no está presentando estacionalidad, de todos modos, el gráfico trata de modelar una pseudo-estacionalidad. Asimismo, la componente de error reporta valores bajos, a excepción del periodo de pandemia.</p>
</section>
<section id="diferencia-ordinaria" class="level4">
<h4 class="anchored" data-anchor-id="diferencia-ordinaria">Diferencia ordinaria</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>DiferenciaOrd<span class="ot">&lt;-</span><span class="fu">diff</span>(PIB3TS)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>( <span class="at">x =</span> <span class="fu">time</span>(DiferenciaOrd), <span class="at">y =</span> DiferenciaOrd, <span class="at">type =</span> <span class="st">'scatter'</span>, <span class="at">mode =</span> <span class="st">'lines'</span>,<span class="at">color=</span><span class="fu">I</span>(<span class="st">"red"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">'PIB sin tendencia(Diferencia Ordinaria, lag=1)'</span>,</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">'Trimestre'</span>, <span class="at">rangeslider =</span> <span class="fu">list</span>(<span class="at">type =</span> <span class="st">'date'</span>)))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-c5300bebc9e6f745965c" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-c5300bebc9e6f745965c">{"x":{"visdat":{"3f2820d135d4":["function () ","plotlyVisDat"]},"cur_data":"3f2820d135d4","attrs":{"3f2820d135d4":{"x":[2005.25,2005.5,2005.75,2006,2006.25,2006.5,2006.75,2007,2007.25,2007.5,2007.75,2008,2008.25,2008.5,2008.75,2009,2009.25,2009.5,2009.75,2010,2010.25,2010.5,2010.75,2011,2011.25,2011.5,2011.75,2012,2012.25,2012.5,2012.75,2013,2013.25,2013.5,2013.75,2014,2014.25,2014.5,2014.75,2015,2015.25,2015.5,2015.75,2016,2016.25,2016.5,2016.75,2017,2017.25,2017.5,2017.75,2018,2018.25,2018.5,2018.75,2019,2019.25,2019.5,2019.75,2020,2020.25,2020.5,2020.75,2021,2021.25,2021.5,2021.75,2022,2022.25,2022.5,2022.75,2023,2023.25,2023.5,2023.75],"y":[2745.7486021369987,-271.81334423700173,2656.2173657570092,2978.0701142409816,1473.5443265820213,2756.0086108009855,2566.2954468819953,2303.3316037390032,1540.5127731210086,3096.6761962570017,2309.3349843350006,391.93944451099378,756.1758151309914,1416.3216262210044,-2074.7985945199907,99.798037536005722,1342.931638443988,1710.102093035006,1690.3854644430103,1063.4914635619789,2257.4320823610178,1464.055154200003,3746.3353724249755,3047.5700729610107,2273.6970683959953,3875.1866970830015,1290.7066007660178,2621.0474835879868,244.00240137099172,-237.46260882599745,2149.5378143260023,2087.4281814720016,5706.511097383016,1194.6200200089952,2447.8233152489993,2780.8785015179892,78.441373262001434,2625.7151723270072,1600.5104463419993,1385.1540569379868,1135.1139090820216,2568.1053403929982,-1110.5716927280009,2449.9007079769799,453.31982346100267,963.09108467100305,771.64601668299292,231.69591158800176,630.19170481900801,1678.507231844007,298.18673265099642,1037.1457275069843,2690.3709360890207,1951.8205857120047,346.89674381999066,2453.1256276729982,1690.919879514986,2284.1211026320234,127.79330652698991,-2962.2223067370069,-36333.133989455993,19175.537946136988,12530.673298683017,7744.7430522989889,-5272.7936652549834,12083.595267820987,9405.2564520600135,1745.7517107539752,3113.7509854620148,2448.4055489309831,-2276.2371238329797,3415.2983794760075,-3544.529139405,825.95040146997781,90.869136504014023],"mode":"lines","color":["red"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"PIB sin tendencia(Diferencia Ordinaria, lag=1)","xaxis":{"domain":[0,1],"automargin":true,"title":"Trimestre","rangeslider":{"type":"date"}},"yaxis":{"domain":[0,1],"automargin":true,"title":[]},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[2005.25,2005.5,2005.75,2006,2006.25,2006.5,2006.75,2007,2007.25,2007.5,2007.75,2008,2008.25,2008.5,2008.75,2009,2009.25,2009.5,2009.75,2010,2010.25,2010.5,2010.75,2011,2011.25,2011.5,2011.75,2012,2012.25,2012.5,2012.75,2013,2013.25,2013.5,2013.75,2014,2014.25,2014.5,2014.75,2015,2015.25,2015.5,2015.75,2016,2016.25,2016.5,2016.75,2017,2017.25,2017.5,2017.75,2018,2018.25,2018.5,2018.75,2019,2019.25,2019.5,2019.75,2020,2020.25,2020.5,2020.75,2021,2021.25,2021.5,2021.75,2022,2022.25,2022.5,2022.75,2023,2023.25,2023.5,2023.75],"y":[2745.7486021369987,-271.81334423700173,2656.2173657570092,2978.0701142409816,1473.5443265820213,2756.0086108009855,2566.2954468819953,2303.3316037390032,1540.5127731210086,3096.6761962570017,2309.3349843350006,391.93944451099378,756.1758151309914,1416.3216262210044,-2074.7985945199907,99.798037536005722,1342.931638443988,1710.102093035006,1690.3854644430103,1063.4914635619789,2257.4320823610178,1464.055154200003,3746.3353724249755,3047.5700729610107,2273.6970683959953,3875.1866970830015,1290.7066007660178,2621.0474835879868,244.00240137099172,-237.46260882599745,2149.5378143260023,2087.4281814720016,5706.511097383016,1194.6200200089952,2447.8233152489993,2780.8785015179892,78.441373262001434,2625.7151723270072,1600.5104463419993,1385.1540569379868,1135.1139090820216,2568.1053403929982,-1110.5716927280009,2449.9007079769799,453.31982346100267,963.09108467100305,771.64601668299292,231.69591158800176,630.19170481900801,1678.507231844007,298.18673265099642,1037.1457275069843,2690.3709360890207,1951.8205857120047,346.89674381999066,2453.1256276729982,1690.919879514986,2284.1211026320234,127.79330652698991,-2962.2223067370069,-36333.133989455993,19175.537946136988,12530.673298683017,7744.7430522989889,-5272.7936652549834,12083.595267820987,9405.2564520600135,1745.7517107539752,3113.7509854620148,2448.4055489309831,-2276.2371238329797,3415.2983794760075,-3544.529139405,825.95040146997781,90.869136504014023],"mode":"lines","type":"scatter","marker":{"color":"rgba(255,0,0,1)","line":{"color":"rgba(255,0,0,1)"}},"textfont":{"color":"rgba(255,0,0,1)"},"error_y":{"color":"rgba(255,0,0,1)"},"error_x":{"color":"rgba(255,0,0,1)"},"line":{"color":"rgba(255,0,0,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Las conclusiones al extraer la tendencia, mediante diferencia ordinaria,</p>
</section>
<section id="promedio-móvil" class="level4">
<h4 class="anchored" data-anchor-id="promedio-móvil">Promedio móvil</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>PIBcomProm<span class="ot">=</span><span class="fu">decompose</span>(PIB3TS)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(PIBcomProm)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="PIBQuarto---Descriptiva_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>ExtraProm<span class="ot">=</span>PIB3TS<span class="sc">-</span>PIBcomProm<span class="sc">$</span>trend</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>( <span class="at">x =</span> <span class="fu">time</span>(ExtraProm), <span class="at">y =</span> ExtraProm, <span class="at">type =</span> <span class="st">'scatter'</span>, <span class="at">mode =</span> <span class="st">'lines'</span>,<span class="at">color=</span><span class="fu">I</span>(<span class="st">"red"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">'PIB con tendencia extraída (Promedio móvil)'</span>,</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">'Trimestre'</span>, <span class="at">rangeslider =</span> <span class="fu">list</span>(<span class="at">type =</span> <span class="st">'date'</span>)))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-fb57cee9c0908eaf4769" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-fb57cee9c0908eaf4769">{"x":{"visdat":{"3f2866055e46":["function () ","plotlyVisDat"]},"cur_data":"3f2866055e46","attrs":{"3f2866055e46":{"x":[2005,2005.25,2005.5,2005.75,2006,2006.25,2006.5,2006.75,2007,2007.25,2007.5,2007.75,2008,2008.25,2008.5,2008.75,2009,2009.25,2009.5,2009.75,2010,2010.25,2010.5,2010.75,2011,2011.25,2011.5,2011.75,2012,2012.25,2012.5,2012.75,2013,2013.25,2013.5,2013.75,2014,2014.25,2014.5,2014.75,2015,2015.25,2015.5,2015.75,2016,2016.25,2016.5,2016.75,2017,2017.25,2017.5,2017.75,2018,2018.25,2018.5,2018.75,2019,2019.25,2019.5,2019.75,2020,2020.25,2020.5,2020.75,2021,2021.25,2021.5,2021.75,2022,2022.25,2022.5,2022.75,2023,2023.25,2023.5,2023.75],"y":[null,null,-1127.0517052607611,-338.86448953385116,551.7232647415949,-429.45227316222736,-32.580973175005056,250.5484208886046,219.75946780983941,-584.31170625047525,438.82462054700591,1011.5858750747575,-24.96196921824594,60.787575720110908,1391.2173049772391,-806.29998854888254,-939.28768628486432,-336.51234883500729,42.323757582256803,166.6690016646171,-419.43644326925278,-37.839140547497664,-954.62233065938926,160.8317480245023,274.09596112961299,-380.95067673324957,925.7612342198554,-44.979794094251702,1082.4130570303823,239.48808748161537,-1125.5533811946225,-719.7056009558728,-1237.7913691770227,1646.9097622931295,-104.24716123187682,14.626635992521187,991.17744096124079,-807.68166775238933,221.11268678487977,267.08380393212428,-27.184306310373358,-225.40606803336414,1215.1555375584867,-1070.8289606478938,489.50998451863416,18.617613458016422,99.494889479625272,244.09371189211379,-262.79357435673592,-401.42967526725261,466.75093436136376,-403.59258610161487,-826.66368485084968,363.23750435226248,631.5021042615117,-757.22324317027233,43.674110707739601,68.216081474354723,1390.2656968208903,5985.9127414849936,10133.123801068374,-22752.363926524878,-3017.9103874241409,4850.7652938179963,4937.4610229404934,-6716.2100248736097,127.05888390925247,3993.5448132846504,356.60663487561396,752.25314302250626,1734.0475780347188,-1385.2089776988723,2222.1618789175118,-1223.3761724566284,null,null],"mode":"lines","color":["red"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"PIB con tendencia extraída (Promedio móvil)","xaxis":{"domain":[0,1],"automargin":true,"title":"Trimestre","rangeslider":{"type":"date"}},"yaxis":{"domain":[0,1],"automargin":true,"title":[]},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[2005,2005.25,2005.5,2005.75,2006,2006.25,2006.5,2006.75,2007,2007.25,2007.5,2007.75,2008,2008.25,2008.5,2008.75,2009,2009.25,2009.5,2009.75,2010,2010.25,2010.5,2010.75,2011,2011.25,2011.5,2011.75,2012,2012.25,2012.5,2012.75,2013,2013.25,2013.5,2013.75,2014,2014.25,2014.5,2014.75,2015,2015.25,2015.5,2015.75,2016,2016.25,2016.5,2016.75,2017,2017.25,2017.5,2017.75,2018,2018.25,2018.5,2018.75,2019,2019.25,2019.5,2019.75,2020,2020.25,2020.5,2020.75,2021,2021.25,2021.5,2021.75,2022,2022.25,2022.5,2022.75,2023,2023.25,2023.5,2023.75],"y":[null,null,-1127.0517052607611,-338.86448953385116,551.7232647415949,-429.45227316222736,-32.580973175005056,250.5484208886046,219.75946780983941,-584.31170625047525,438.82462054700591,1011.5858750747575,-24.96196921824594,60.787575720110908,1391.2173049772391,-806.29998854888254,-939.28768628486432,-336.51234883500729,42.323757582256803,166.6690016646171,-419.43644326925278,-37.839140547497664,-954.62233065938926,160.8317480245023,274.09596112961299,-380.95067673324957,925.7612342198554,-44.979794094251702,1082.4130570303823,239.48808748161537,-1125.5533811946225,-719.7056009558728,-1237.7913691770227,1646.9097622931295,-104.24716123187682,14.626635992521187,991.17744096124079,-807.68166775238933,221.11268678487977,267.08380393212428,-27.184306310373358,-225.40606803336414,1215.1555375584867,-1070.8289606478938,489.50998451863416,18.617613458016422,99.494889479625272,244.09371189211379,-262.79357435673592,-401.42967526725261,466.75093436136376,-403.59258610161487,-826.66368485084968,363.23750435226248,631.5021042615117,-757.22324317027233,43.674110707739601,68.216081474354723,1390.2656968208903,5985.9127414849936,10133.123801068374,-22752.363926524878,-3017.9103874241409,4850.7652938179963,4937.4610229404934,-6716.2100248736097,127.05888390925247,3993.5448132846504,356.60663487561396,752.25314302250626,1734.0475780347188,-1385.2089776988723,2222.1618789175118,-1223.3761724566284,null,null],"mode":"lines","type":"scatter","marker":{"color":"rgba(255,0,0,1)","line":{"color":"rgba(255,0,0,1)"}},"textfont":{"color":"rgba(255,0,0,1)"},"error_y":{"color":"rgba(255,0,0,1)"},"error_x":{"color":"rgba(255,0,0,1)"},"line":{"color":"rgba(255,0,0,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="comparando-las-funciones-de-autocorrelación-de-las-series-sin-tendencia" class="level4">
<h4 class="anchored" data-anchor-id="comparando-las-funciones-de-autocorrelación-de-las-series-sin-tendencia">Comparando las funciones de autocorrelación de las series sin tendencia</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(PIB3TS,<span class="at">lag.max =</span> <span class="fu">length</span>(PIB3TS))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="PIBQuarto---Descriptiva_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>))</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(PIB3NoLM,<span class="at">lag.max =</span><span class="fu">length</span>(PIB3NoLM),<span class="at">main=</span><span class="st">"Autocorrelación serie sin tendencia lineal"</span>)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(STLextra,<span class="at">lag.max =</span><span class="fu">length</span>(STLextra),<span class="at">main=</span><span class="st">"Autocorrelación serie sin tendencia STL"</span>)</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(DiferenciaOrd,<span class="at">lag.max =</span><span class="fu">length</span>(DiferenciaOrd),<span class="at">main=</span><span class="st">"Autocorrelación serie sin tendencia</span><span class="sc">\n</span><span class="st">por diferencia ordinaria"</span>)</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(ExtraProm[<span class="dv">3</span><span class="sc">:</span><span class="dv">74</span>],<span class="at">lag.max =</span><span class="fu">length</span>(ExtraProm[<span class="dv">3</span><span class="sc">:</span><span class="dv">74</span>]),<span class="at">main=</span><span class="st">"Autocorrelación serie sin tendencia</span><span class="sc">\n</span><span class="st">por promedio móvil"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="PIBQuarto---Descriptiva_files/figure-html/unnamed-chunk-14-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="explorando-relaciones-no-lineales" class="level3">
<h3 class="anchored" data-anchor-id="explorando-relaciones-no-lineales">Explorando relaciones no lineales</h3>
<section id="gráficos-de-retardos" class="level4">
<h4 class="anchored" data-anchor-id="gráficos-de-retardos">Gráficos de retardos</h4>
<p>El gráfico de retardos indica que hay una relación lineal con el retardo número 4 en las 3 series con tendencia extraída.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co">#El gráfico de retardos se realiza con la serie con tendencia extraída</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Tendencia STL extraída</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">2</span>))</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="fu">lag1.plot</span>(STLextra, <span class="dv">4</span>,<span class="at">corr=</span>T)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="PIBQuarto---Descriptiva_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tendencia extraída por diferencia ordinaria</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">2</span>))</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="fu">lag1.plot</span>(DiferenciaOrd, <span class="dv">4</span>,<span class="at">corr=</span>T)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="PIBQuarto---Descriptiva_files/figure-html/unnamed-chunk-15-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tendencia extraída por promedio móvil</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">2</span>))</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="fu">lag1.plot</span>(ExtraProm[<span class="dv">3</span><span class="sc">:</span><span class="dv">74</span>], <span class="dv">4</span>,<span class="at">corr=</span>T)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="PIBQuarto---Descriptiva_files/figure-html/unnamed-chunk-15-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="detección-de-estacionalidad" class="level3">
<h3 class="anchored" data-anchor-id="detección-de-estacionalidad">Detección de estacionalidad</h3>
<p>Un primer gráfico propuesto para la detección de la estacionalidad de forma visual es el siguiente, recordemos que está siendo aplicado en la serie con la tendencia extraída.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tendencia STL extraída</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>TSstudio<span class="sc">::</span><span class="fu">ts_heatmap</span>(STLextra,<span class="at">title =</span> <span class="st">"Mapa de Calor - PIB en Colombia (STL)"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-bcb0dc6980350c5825f6" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-bcb0dc6980350c5825f6">{"x":{"visdat":{"3f2853e7107b":["function () ","plotlyVisDat"]},"cur_data":"3f2853e7107b","attrs":{"3f2853e7107b":{"z":[[-384.46359604402096,356.81659336062148,218.02027696301229,-153.5838098571985,4.2925856396032032,-294.53789596108254,189.52929031991516,433.35606233213912,-913.60075117668021,640.81113980707596,132.85505391159677,623.65639974092483,-22.3235153167916,-255.70264660537941,326.68899882820551,9216.3536101328791,2985.9080483239668,-855.49079162545968,1854.8393915155611],[1062.6527472154849,-329.42124815302668,-360.61559992455295,-343.96254384360509,37.827121474401793,391.59094705979805,-507.47999106545467,75.246890039590653,1074.7781494861993,-682.34382592019392,-525.52959203152568,-248.08632334379945,-238.10022359562572,117.9807675164775,-317.49235765513731,-11681.512580889161,-3898.8092021571065,-156.69536507918383,-1238.8700706493983],[-816.35823843211983,108.19865622205543,93.853156250930624,759.28517480319715,-17.03814223135123,-468.44988883740734,626.54792802687734,-411.28280271182302,-517.06370133132441,338.94688992356532,955.2622263939702,27.280118364025839,351.7541867372347,354.04439784461283,140.44450527481968,4950.9834938047861,1164.3033765808505,1119.5918346767721,-101.870333627332],[60.312842546351021,-32.995303197443718,263.87361700637848,-510.25258373763063,187.79227094646194,224.7569875518675,-589.5323237303528,474.1424060286954,-163.60927932328195,-65.319529120199149,-989.71009041505749,99.537992217869032,-93.200602460361551,-508.89190658464213,-2269.831822027656,-780.44325635264977,1083.4872109222051,-1784.136965179845,176.81212666133069]],"x":["2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021","2022","2023"],"y":[1,2,3,4],"colorscale":[[0,"#F7FBFF"],[0.37241617434011476,"#9FCAE1"],[0.45036563411937575,"#80B9DA"],[0.47360699533818151,"#77B4D8"],[0.49969898432625814,"#6BAED6"],[0.51162173174730263,"#68ABD5"],[0.51526369875688538,"#66ABD4"],[0.51804436349174643,"#66AAD4"],[0.51991692563927094,"#65A9D3"],[0.52163552129641511,"#65A9D3"],[0.52632975321156639,"#63A8D3"],[0.5307709483719466,"#62A7D2"],[0.53383359271629238,"#61A6D2"],[0.53423870061691803,"#61A6D2"],[0.53456462468645871,"#61A6D2"],[0.53462973550402015,"#61A6D2"],[0.53469729816837464,"#61A6D2"],[0.53656495785531499,"#60A6D1"],[0.5393005044227509,"#5FA5D1"],[0.54058385107750762,"#5FA5D1"],[0.54172502003234158,"#5EA5D1"],[0.54252189833219888,"#5EA4D1"],[0.54321772514808819,"#5EA4D0"],[0.54378854373735708,"#5EA4D0"],[0.5448869554835245,"#5DA4D0"],[0.54674529111457504,"#5DA3D0"],[0.54710974570491278,"#5DA3D0"],[0.54758759830751302,"#5DA3D0"],[0.5511521222446194,"#5BA2CF"],[0.55148296531639052,"#5BA2CF"],[0.55163185875812004,"#5BA2CF"],[0.55410644040952728,"#5AA2CF"],[0.55452130243839293,"#5AA2CF"],[0.55585546129869512,"#5AA1CF"],[0.55740223289859381,"#59A1CF"],[0.55791289689572654,"#59A1CF"],[0.5581658113816903,"#59A1CF"],[0.5591865245815919,"#59A1CE"],[0.56028651883527791,"#58A0CE"],[0.56079121165960588,"#58A0CE"],[0.56186719333478807,"#58A0CE"],[0.56258181402173912,"#58A0CE"],[0.56347215689412933,"#57A0CE"],[0.56374418638819224,"#57A0CE"],[0.56415861453722049,"#579FCE"],[0.56462670593014108,"#579FCE"],[0.56533846694244527,"#579FCE"],[0.5657016356647373,"#579FCE"],[0.567441890916354,"#569FCD"],[0.56796731031490721,"#569FCD"],[0.56805042977588827,"#569FCD"],[0.56941377407059612,"#569ECD"],[0.56973613763285058,"#559ECD"],[0.57160793780120056,"#559ECD"],[0.57461376534587183,"#549DCC"],[0.57520032719784819,"#549DCC"],[0.57581317908887863,"#539DCC"],[0.57592276975648282,"#539DCC"],[0.5760554242337711,"#539DCC"],[0.57771943879780896,"#539CCC"],[0.57971797371475109,"#529CCC"],[0.58166967267404857,"#519CCC"],[0.58882418272524517,"#4F9ACB"],[0.58896254748744259,"#4F9ACB"],[0.58964506749450074,"#4F9ACB"],[0.59531426041176705,"#4D99CA"],[0.60469211027449454,"#4996C9"],[0.60983093736047,"#4895C8"],[0.61041115938696211,"#4795C8"],[0.61082790343902926,"#4795C8"],[0.61255557378702297,"#4795C8"],[0.61469510044947651,"#4694C7"],[0.64773847476447577,"#3D8CC3"],[0.70186211812928623,"#307EBC"],[0.79589446705517986,"#1A65AC"],[1,"#08306B"]],"hoverinfo":"text","text":[["Value:  -384.463596044021 <br> Year :  2005 <br> Quarter  : 1","Value:  356.816593360621 <br> Year :  2006 <br> Quarter  : 1","Value:  218.020276963012 <br> Year :  2007 <br> Quarter  : 1","Value:  -153.583809857199 <br> Year :  2008 <br> Quarter  : 1","Value:  4.2925856396032 <br> Year :  2009 <br> Quarter  : 1","Value:  -294.537895961083 <br> Year :  2010 <br> Quarter  : 1","Value:  189.529290319915 <br> Year :  2011 <br> Quarter  : 1","Value:  433.356062332139 <br> Year :  2012 <br> Quarter  : 1","Value:  -913.60075117668 <br> Year :  2013 <br> Quarter  : 1","Value:  640.811139807076 <br> Year :  2014 <br> Quarter  : 1","Value:  132.855053911597 <br> Year :  2015 <br> Quarter  : 1","Value:  623.656399740925 <br> Year :  2016 <br> Quarter  : 1","Value:  -22.3235153167916 <br> Year :  2017 <br> Quarter  : 1","Value:  -255.702646605379 <br> Year :  2018 <br> Quarter  : 1","Value:  326.688998828206 <br> Year :  2019 <br> Quarter  : 1","Value:  9216.35361013288 <br> Year :  2020 <br> Quarter  : 1","Value:  2985.90804832397 <br> Year :  2021 <br> Quarter  : 1","Value:  -855.49079162546 <br> Year :  2022 <br> Quarter  : 1","Value:  1854.83939151556 <br> Year :  2023 <br> Quarter  : 1"],["Value:  1062.65274721548 <br> Year :  2005 <br> Quarter  : 2","Value:  -329.421248153027 <br> Year :  2006 <br> Quarter  : 2","Value:  -360.615599924553 <br> Year :  2007 <br> Quarter  : 2","Value:  -343.962543843605 <br> Year :  2008 <br> Quarter  : 2","Value:  37.8271214744018 <br> Year :  2009 <br> Quarter  : 2","Value:  391.590947059798 <br> Year :  2010 <br> Quarter  : 2","Value:  -507.479991065455 <br> Year :  2011 <br> Quarter  : 2","Value:  75.2468900395907 <br> Year :  2012 <br> Quarter  : 2","Value:  1074.7781494862 <br> Year :  2013 <br> Quarter  : 2","Value:  -682.343825920194 <br> Year :  2014 <br> Quarter  : 2","Value:  -525.529592031526 <br> Year :  2015 <br> Quarter  : 2","Value:  -248.086323343799 <br> Year :  2016 <br> Quarter  : 2","Value:  -238.100223595626 <br> Year :  2017 <br> Quarter  : 2","Value:  117.980767516477 <br> Year :  2018 <br> Quarter  : 2","Value:  -317.492357655137 <br> Year :  2019 <br> Quarter  : 2","Value:  -11681.5125808892 <br> Year :  2020 <br> Quarter  : 2","Value:  -3898.80920215711 <br> Year :  2021 <br> Quarter  : 2","Value:  -156.695365079184 <br> Year :  2022 <br> Quarter  : 2","Value:  -1238.8700706494 <br> Year :  2023 <br> Quarter  : 2"],["Value:  -816.35823843212 <br> Year :  2005 <br> Quarter  : 3","Value:  108.198656222055 <br> Year :  2006 <br> Quarter  : 3","Value:  93.8531562509306 <br> Year :  2007 <br> Quarter  : 3","Value:  759.285174803197 <br> Year :  2008 <br> Quarter  : 3","Value:  -17.0381422313512 <br> Year :  2009 <br> Quarter  : 3","Value:  -468.449888837407 <br> Year :  2010 <br> Quarter  : 3","Value:  626.547928026877 <br> Year :  2011 <br> Quarter  : 3","Value:  -411.282802711823 <br> Year :  2012 <br> Quarter  : 3","Value:  -517.063701331324 <br> Year :  2013 <br> Quarter  : 3","Value:  338.946889923565 <br> Year :  2014 <br> Quarter  : 3","Value:  955.26222639397 <br> Year :  2015 <br> Quarter  : 3","Value:  27.2801183640258 <br> Year :  2016 <br> Quarter  : 3","Value:  351.754186737235 <br> Year :  2017 <br> Quarter  : 3","Value:  354.044397844613 <br> Year :  2018 <br> Quarter  : 3","Value:  140.44450527482 <br> Year :  2019 <br> Quarter  : 3","Value:  4950.98349380479 <br> Year :  2020 <br> Quarter  : 3","Value:  1164.30337658085 <br> Year :  2021 <br> Quarter  : 3","Value:  1119.59183467677 <br> Year :  2022 <br> Quarter  : 3","Value:  -101.870333627332 <br> Year :  2023 <br> Quarter  : 3"],["Value:  60.312842546351 <br> Year :  2005 <br> Quarter  : 4","Value:  -32.9953031974437 <br> Year :  2006 <br> Quarter  : 4","Value:  263.873617006378 <br> Year :  2007 <br> Quarter  : 4","Value:  -510.252583737631 <br> Year :  2008 <br> Quarter  : 4","Value:  187.792270946462 <br> Year :  2009 <br> Quarter  : 4","Value:  224.756987551867 <br> Year :  2010 <br> Quarter  : 4","Value:  -589.532323730353 <br> Year :  2011 <br> Quarter  : 4","Value:  474.142406028695 <br> Year :  2012 <br> Quarter  : 4","Value:  -163.609279323282 <br> Year :  2013 <br> Quarter  : 4","Value:  -65.3195291201991 <br> Year :  2014 <br> Quarter  : 4","Value:  -989.710090415057 <br> Year :  2015 <br> Quarter  : 4","Value:  99.537992217869 <br> Year :  2016 <br> Quarter  : 4","Value:  -93.2006024603616 <br> Year :  2017 <br> Quarter  : 4","Value:  -508.891906584642 <br> Year :  2018 <br> Quarter  : 4","Value:  -2269.83182202766 <br> Year :  2019 <br> Quarter  : 4","Value:  -780.44325635265 <br> Year :  2020 <br> Quarter  : 4","Value:  1083.48721092221 <br> Year :  2021 <br> Quarter  : 4","Value:  -1784.13696517984 <br> Year :  2022 <br> Quarter  : 4","Value:  176.812126661331 <br> Year :  2023 <br> Quarter  : 4"]],"xgap":3,"ygap":3,"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"heatmap"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Mapa de Calor - PIB en Colombia (STL)","xaxis":{"domain":[0,1],"automargin":true,"title":"Year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Quarter"},"scene":{"zaxis":{"title":[]}},"hovermode":"closest","showlegend":false,"legend":{"yanchor":"top","y":0.5}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"colorbar":{"title":"","ticklen":2,"len":0.5,"lenmode":"fraction","y":1,"yanchor":"top"},"colorscale":[[0,"#F7FBFF"],[0.37241617434011476,"#9FCAE1"],[0.45036563411937575,"#80B9DA"],[0.47360699533818151,"#77B4D8"],[0.49969898432625814,"#6BAED6"],[0.51162173174730263,"#68ABD5"],[0.51526369875688538,"#66ABD4"],[0.51804436349174643,"#66AAD4"],[0.51991692563927094,"#65A9D3"],[0.52163552129641511,"#65A9D3"],[0.52632975321156639,"#63A8D3"],[0.5307709483719466,"#62A7D2"],[0.53383359271629238,"#61A6D2"],[0.53423870061691803,"#61A6D2"],[0.53456462468645871,"#61A6D2"],[0.53462973550402015,"#61A6D2"],[0.53469729816837464,"#61A6D2"],[0.53656495785531499,"#60A6D1"],[0.5393005044227509,"#5FA5D1"],[0.54058385107750762,"#5FA5D1"],[0.54172502003234158,"#5EA5D1"],[0.54252189833219888,"#5EA4D1"],[0.54321772514808819,"#5EA4D0"],[0.54378854373735708,"#5EA4D0"],[0.5448869554835245,"#5DA4D0"],[0.54674529111457504,"#5DA3D0"],[0.54710974570491278,"#5DA3D0"],[0.54758759830751302,"#5DA3D0"],[0.5511521222446194,"#5BA2CF"],[0.55148296531639052,"#5BA2CF"],[0.55163185875812004,"#5BA2CF"],[0.55410644040952728,"#5AA2CF"],[0.55452130243839293,"#5AA2CF"],[0.55585546129869512,"#5AA1CF"],[0.55740223289859381,"#59A1CF"],[0.55791289689572654,"#59A1CF"],[0.5581658113816903,"#59A1CF"],[0.5591865245815919,"#59A1CE"],[0.56028651883527791,"#58A0CE"],[0.56079121165960588,"#58A0CE"],[0.56186719333478807,"#58A0CE"],[0.56258181402173912,"#58A0CE"],[0.56347215689412933,"#57A0CE"],[0.56374418638819224,"#57A0CE"],[0.56415861453722049,"#579FCE"],[0.56462670593014108,"#579FCE"],[0.56533846694244527,"#579FCE"],[0.5657016356647373,"#579FCE"],[0.567441890916354,"#569FCD"],[0.56796731031490721,"#569FCD"],[0.56805042977588827,"#569FCD"],[0.56941377407059612,"#569ECD"],[0.56973613763285058,"#559ECD"],[0.57160793780120056,"#559ECD"],[0.57461376534587183,"#549DCC"],[0.57520032719784819,"#549DCC"],[0.57581317908887863,"#539DCC"],[0.57592276975648282,"#539DCC"],[0.5760554242337711,"#539DCC"],[0.57771943879780896,"#539CCC"],[0.57971797371475109,"#529CCC"],[0.58166967267404857,"#519CCC"],[0.58882418272524517,"#4F9ACB"],[0.58896254748744259,"#4F9ACB"],[0.58964506749450074,"#4F9ACB"],[0.59531426041176705,"#4D99CA"],[0.60469211027449454,"#4996C9"],[0.60983093736047,"#4895C8"],[0.61041115938696211,"#4795C8"],[0.61082790343902926,"#4795C8"],[0.61255557378702297,"#4795C8"],[0.61469510044947651,"#4694C7"],[0.64773847476447577,"#3D8CC3"],[0.70186211812928623,"#307EBC"],[0.79589446705517986,"#1A65AC"],[1,"#08306B"]],"showscale":true,"z":[[-384.46359604402096,356.81659336062148,218.02027696301229,-153.5838098571985,4.2925856396032032,-294.53789596108254,189.52929031991516,433.35606233213912,-913.60075117668021,640.81113980707596,132.85505391159677,623.65639974092483,-22.3235153167916,-255.70264660537941,326.68899882820551,9216.3536101328791,2985.9080483239668,-855.49079162545968,1854.8393915155611],[1062.6527472154849,-329.42124815302668,-360.61559992455295,-343.96254384360509,37.827121474401793,391.59094705979805,-507.47999106545467,75.246890039590653,1074.7781494861993,-682.34382592019392,-525.52959203152568,-248.08632334379945,-238.10022359562572,117.9807675164775,-317.49235765513731,-11681.512580889161,-3898.8092021571065,-156.69536507918383,-1238.8700706493983],[-816.35823843211983,108.19865622205543,93.853156250930624,759.28517480319715,-17.03814223135123,-468.44988883740734,626.54792802687734,-411.28280271182302,-517.06370133132441,338.94688992356532,955.2622263939702,27.280118364025839,351.7541867372347,354.04439784461283,140.44450527481968,4950.9834938047861,1164.3033765808505,1119.5918346767721,-101.870333627332],[60.312842546351021,-32.995303197443718,263.87361700637848,-510.25258373763063,187.79227094646194,224.7569875518675,-589.5323237303528,474.1424060286954,-163.60927932328195,-65.319529120199149,-989.71009041505749,99.537992217869032,-93.200602460361551,-508.89190658464213,-2269.831822027656,-780.44325635264977,1083.4872109222051,-1784.136965179845,176.81212666133069]],"x":["2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021","2022","2023"],"y":[1,2,3,4],"hoverinfo":"text","text":[["Value:  -384.463596044021 <br> Year :  2005 <br> Quarter  : 1","Value:  356.816593360621 <br> Year :  2006 <br> Quarter  : 1","Value:  218.020276963012 <br> Year :  2007 <br> Quarter  : 1","Value:  -153.583809857199 <br> Year :  2008 <br> Quarter  : 1","Value:  4.2925856396032 <br> Year :  2009 <br> Quarter  : 1","Value:  -294.537895961083 <br> Year :  2010 <br> Quarter  : 1","Value:  189.529290319915 <br> Year :  2011 <br> Quarter  : 1","Value:  433.356062332139 <br> Year :  2012 <br> Quarter  : 1","Value:  -913.60075117668 <br> Year :  2013 <br> Quarter  : 1","Value:  640.811139807076 <br> Year :  2014 <br> Quarter  : 1","Value:  132.855053911597 <br> Year :  2015 <br> Quarter  : 1","Value:  623.656399740925 <br> Year :  2016 <br> Quarter  : 1","Value:  -22.3235153167916 <br> Year :  2017 <br> Quarter  : 1","Value:  -255.702646605379 <br> Year :  2018 <br> Quarter  : 1","Value:  326.688998828206 <br> Year :  2019 <br> Quarter  : 1","Value:  9216.35361013288 <br> Year :  2020 <br> Quarter  : 1","Value:  2985.90804832397 <br> Year :  2021 <br> Quarter  : 1","Value:  -855.49079162546 <br> Year :  2022 <br> Quarter  : 1","Value:  1854.83939151556 <br> Year :  2023 <br> Quarter  : 1"],["Value:  1062.65274721548 <br> Year :  2005 <br> Quarter  : 2","Value:  -329.421248153027 <br> Year :  2006 <br> Quarter  : 2","Value:  -360.615599924553 <br> Year :  2007 <br> Quarter  : 2","Value:  -343.962543843605 <br> Year :  2008 <br> Quarter  : 2","Value:  37.8271214744018 <br> Year :  2009 <br> Quarter  : 2","Value:  391.590947059798 <br> Year :  2010 <br> Quarter  : 2","Value:  -507.479991065455 <br> Year :  2011 <br> Quarter  : 2","Value:  75.2468900395907 <br> Year :  2012 <br> Quarter  : 2","Value:  1074.7781494862 <br> Year :  2013 <br> Quarter  : 2","Value:  -682.343825920194 <br> Year :  2014 <br> Quarter  : 2","Value:  -525.529592031526 <br> Year :  2015 <br> Quarter  : 2","Value:  -248.086323343799 <br> Year :  2016 <br> Quarter  : 2","Value:  -238.100223595626 <br> Year :  2017 <br> Quarter  : 2","Value:  117.980767516477 <br> Year :  2018 <br> Quarter  : 2","Value:  -317.492357655137 <br> Year :  2019 <br> Quarter  : 2","Value:  -11681.5125808892 <br> Year :  2020 <br> Quarter  : 2","Value:  -3898.80920215711 <br> Year :  2021 <br> Quarter  : 2","Value:  -156.695365079184 <br> Year :  2022 <br> Quarter  : 2","Value:  -1238.8700706494 <br> Year :  2023 <br> Quarter  : 2"],["Value:  -816.35823843212 <br> Year :  2005 <br> Quarter  : 3","Value:  108.198656222055 <br> Year :  2006 <br> Quarter  : 3","Value:  93.8531562509306 <br> Year :  2007 <br> Quarter  : 3","Value:  759.285174803197 <br> Year :  2008 <br> Quarter  : 3","Value:  -17.0381422313512 <br> Year :  2009 <br> Quarter  : 3","Value:  -468.449888837407 <br> Year :  2010 <br> Quarter  : 3","Value:  626.547928026877 <br> Year :  2011 <br> Quarter  : 3","Value:  -411.282802711823 <br> Year :  2012 <br> Quarter  : 3","Value:  -517.063701331324 <br> Year :  2013 <br> Quarter  : 3","Value:  338.946889923565 <br> Year :  2014 <br> Quarter  : 3","Value:  955.26222639397 <br> Year :  2015 <br> Quarter  : 3","Value:  27.2801183640258 <br> Year :  2016 <br> Quarter  : 3","Value:  351.754186737235 <br> Year :  2017 <br> Quarter  : 3","Value:  354.044397844613 <br> Year :  2018 <br> Quarter  : 3","Value:  140.44450527482 <br> Year :  2019 <br> Quarter  : 3","Value:  4950.98349380479 <br> Year :  2020 <br> Quarter  : 3","Value:  1164.30337658085 <br> Year :  2021 <br> Quarter  : 3","Value:  1119.59183467677 <br> Year :  2022 <br> Quarter  : 3","Value:  -101.870333627332 <br> Year :  2023 <br> Quarter  : 3"],["Value:  60.312842546351 <br> Year :  2005 <br> Quarter  : 4","Value:  -32.9953031974437 <br> Year :  2006 <br> Quarter  : 4","Value:  263.873617006378 <br> Year :  2007 <br> Quarter  : 4","Value:  -510.252583737631 <br> Year :  2008 <br> Quarter  : 4","Value:  187.792270946462 <br> Year :  2009 <br> Quarter  : 4","Value:  224.756987551867 <br> Year :  2010 <br> Quarter  : 4","Value:  -589.532323730353 <br> Year :  2011 <br> Quarter  : 4","Value:  474.142406028695 <br> Year :  2012 <br> Quarter  : 4","Value:  -163.609279323282 <br> Year :  2013 <br> Quarter  : 4","Value:  -65.3195291201991 <br> Year :  2014 <br> Quarter  : 4","Value:  -989.710090415057 <br> Year :  2015 <br> Quarter  : 4","Value:  99.537992217869 <br> Year :  2016 <br> Quarter  : 4","Value:  -93.2006024603616 <br> Year :  2017 <br> Quarter  : 4","Value:  -508.891906584642 <br> Year :  2018 <br> Quarter  : 4","Value:  -2269.83182202766 <br> Year :  2019 <br> Quarter  : 4","Value:  -780.44325635265 <br> Year :  2020 <br> Quarter  : 4","Value:  1083.48721092221 <br> Year :  2021 <br> Quarter  : 4","Value:  -1784.13696517984 <br> Year :  2022 <br> Quarter  : 4","Value:  176.812126661331 <br> Year :  2023 <br> Quarter  : 4"]],"xgap":3,"ygap":3,"type":"heatmap","xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tendencia extraída por promedio móvil</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>TSstudio<span class="sc">::</span><span class="fu">ts_heatmap</span>(ExtraProm,<span class="at">title =</span> <span class="st">"Mapa de Calor - PIB en Colombia(Promedio móvil)"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-41e42b67f16a7fc27b29" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-41e42b67f16a7fc27b29">{"x":{"visdat":{"3f284f43692":["function () ","plotlyVisDat"]},"cur_data":"3f284f43692","attrs":{"3f284f43692":{"z":[[null,551.7232647415949,219.75946780983941,-24.96196921824594,-939.28768628486432,-419.43644326925278,274.09596112961299,1082.4130570303823,-1237.7913691770227,991.17744096124079,-27.184306310373358,489.50998451863416,-262.79357435673592,-826.66368485084968,43.674110707739601,10133.123801068374,4937.4610229404934,356.60663487561396,2222.1618789175118],[null,-429.45227316222736,-584.31170625047525,60.787575720110908,-336.51234883500729,-37.839140547497664,-380.95067673324957,239.48808748161537,1646.9097622931295,-807.68166775238933,-225.40606803336414,18.617613458016422,-401.42967526725261,363.23750435226248,68.216081474354723,-22752.363926524878,-6716.2100248736097,752.25314302250626,-1223.3761724566284],[-1127.0517052607611,-32.580973175005056,438.82462054700591,1391.2173049772391,42.323757582256803,-954.62233065938926,925.7612342198554,-1125.5533811946225,-104.24716123187682,221.11268678487977,1215.1555375584867,99.494889479625272,466.75093436136376,631.5021042615117,1390.2656968208903,-3017.9103874241409,127.05888390925247,1734.0475780347188,null],[-338.86448953385116,250.5484208886046,1011.5858750747575,-806.29998854888254,166.6690016646171,160.8317480245023,-44.979794094251702,-719.7056009558728,14.626635992521187,267.08380393212428,-1070.8289606478938,244.09371189211379,-403.59258610161487,-757.22324317027233,5985.9127414849936,4850.7652938179963,3993.5448132846504,-1385.2089776988723,null]],"x":["2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021","2022","2023"],"y":[1,2,3,4],"colorscale":[[0,"#F7FBFF"],[0.48763618877988546,"#71B1D7"],[0.60009611846328603,"#4B97C9"],[0.64974420102328145,"#3D8BC3"],[0.65422695675258624,"#3B8AC2"],[0.65466530198376549,"#3B8AC2"],[0.6575943893670444,"#3B89C2"],[0.6576399512294242,"#3B89C2"],[0.65930404151143673,"#3A89C1"],[0.66283771663741031,"#3988C1"],[0.66330402093861296,"#3988C1"],[0.66672875352482042,"#3987C0"],[0.66730596914210727,"#3887C0"],[0.66734798400334183,"#3887C0"],[0.66884033667224974,"#3886C0"],[0.66998119377387388,"#3886C0"],[0.67409832579961515,"#3785BF"],[0.67880737662382751,"#3684BF"],[0.67911194348857773,"#3684BF"],[0.67959373221249386,"#3583BF"],[0.67965950319488833,"#3583BF"],[0.68028223984710523,"#3583BE"],[0.6815620197776332,"#3583BE"],[0.68163354496583561,"#3583BE"],[0.68387522601034134,"#3482BE"],[0.68501212586820792,"#3482BE"],[0.68869639255158832,"#3381BD"],[0.69049862725245592,"#3381BD"],[0.69071576417333436,"#3380BD"],[0.6908756574191347,"#3380BD"],[0.6910397622336758,"#3380BD"],[0.69110734028240473,"#3380BD"],[0.69231117236598816,"#3280BD"],[0.69243253220405876,"#3280BD"],[0.69315340167452588,"#3280BD"],[0.6931944639551485,"#3280BD"],[0.69371485961277501,"#3280BD"],[0.69394074970191644,"#3280BD"],[0.69489189290114062,"#327FBD"],[0.69573007400576503,"#317FBC"],[0.69675705783507624,"#317FBC"],[0.69693456025463796,"#317FBC"],[0.69854896435242708,"#317EBC"],[0.69859011377937952,"#317EBC"],[0.69914888307144374,"#307EBC"],[0.69928893343191434,"#307EBC"],[0.69948521177359368,"#307EBC"],[0.69998802879672839,"#307EBC"],[0.70020125832993685,"#307EBC"],[0.70271028828349813,"#2F7DBB"],[0.70291192340995801,"#2F7DBB"],[0.70521041801708895,"#2F7DBB"],[0.70605961672886364,"#2F7CBB"],[0.70675168644501918,"#2E7CBB"],[0.70864350209143145,"#2E7CBB"],[0.71106946092715761,"#2D7BBA"],[0.71474132493480846,"#2C7ABA"],[0.72001745441278986,"#2B79B9"],[0.72200666641059441,"#2A78B9"],[0.72262725730109822,"#2A78B9"],[0.72478100920960942,"#2978B8"],[0.72881751557459551,"#2876B8"],[0.73414236161954183,"#2675B7"],[0.73417129864380704,"#2675B7"],[0.74194653553352319,"#2473B6"],[0.7445962701661184,"#2372B6"],[0.75943911832230471,"#206FB3"],[0.81330430496756223,"#1761A8"],[0.83937113686721743,"#125AA3"],[0.84200742828672259,"#1159A3"],[0.87388932486156878,"#08519C"],[1,"#08306B"],[null,"#808080"]],"hoverinfo":"text","text":[["Value:  NA <br> Year :  2005 <br> Quarter  : 1","Value:  551.723264741595 <br> Year :  2006 <br> Quarter  : 1","Value:  219.759467809839 <br> Year :  2007 <br> Quarter  : 1","Value:  -24.9619692182459 <br> Year :  2008 <br> Quarter  : 1","Value:  -939.287686284864 <br> Year :  2009 <br> Quarter  : 1","Value:  -419.436443269253 <br> Year :  2010 <br> Quarter  : 1","Value:  274.095961129613 <br> Year :  2011 <br> Quarter  : 1","Value:  1082.41305703038 <br> Year :  2012 <br> Quarter  : 1","Value:  -1237.79136917702 <br> Year :  2013 <br> Quarter  : 1","Value:  991.177440961241 <br> Year :  2014 <br> Quarter  : 1","Value:  -27.1843063103734 <br> Year :  2015 <br> Quarter  : 1","Value:  489.509984518634 <br> Year :  2016 <br> Quarter  : 1","Value:  -262.793574356736 <br> Year :  2017 <br> Quarter  : 1","Value:  -826.66368485085 <br> Year :  2018 <br> Quarter  : 1","Value:  43.6741107077396 <br> Year :  2019 <br> Quarter  : 1","Value:  10133.1238010684 <br> Year :  2020 <br> Quarter  : 1","Value:  4937.46102294049 <br> Year :  2021 <br> Quarter  : 1","Value:  356.606634875614 <br> Year :  2022 <br> Quarter  : 1","Value:  2222.16187891751 <br> Year :  2023 <br> Quarter  : 1"],["Value:  NA <br> Year :  2005 <br> Quarter  : 2","Value:  -429.452273162227 <br> Year :  2006 <br> Quarter  : 2","Value:  -584.311706250475 <br> Year :  2007 <br> Quarter  : 2","Value:  60.7875757201109 <br> Year :  2008 <br> Quarter  : 2","Value:  -336.512348835007 <br> Year :  2009 <br> Quarter  : 2","Value:  -37.8391405474977 <br> Year :  2010 <br> Quarter  : 2","Value:  -380.95067673325 <br> Year :  2011 <br> Quarter  : 2","Value:  239.488087481615 <br> Year :  2012 <br> Quarter  : 2","Value:  1646.90976229313 <br> Year :  2013 <br> Quarter  : 2","Value:  -807.681667752389 <br> Year :  2014 <br> Quarter  : 2","Value:  -225.406068033364 <br> Year :  2015 <br> Quarter  : 2","Value:  18.6176134580164 <br> Year :  2016 <br> Quarter  : 2","Value:  -401.429675267253 <br> Year :  2017 <br> Quarter  : 2","Value:  363.237504352262 <br> Year :  2018 <br> Quarter  : 2","Value:  68.2160814743547 <br> Year :  2019 <br> Quarter  : 2","Value:  -22752.3639265249 <br> Year :  2020 <br> Quarter  : 2","Value:  -6716.21002487361 <br> Year :  2021 <br> Quarter  : 2","Value:  752.253143022506 <br> Year :  2022 <br> Quarter  : 2","Value:  -1223.37617245663 <br> Year :  2023 <br> Quarter  : 2"],["Value:  -1127.05170526076 <br> Year :  2005 <br> Quarter  : 3","Value:  -32.5809731750051 <br> Year :  2006 <br> Quarter  : 3","Value:  438.824620547006 <br> Year :  2007 <br> Quarter  : 3","Value:  1391.21730497724 <br> Year :  2008 <br> Quarter  : 3","Value:  42.3237575822568 <br> Year :  2009 <br> Quarter  : 3","Value:  -954.622330659389 <br> Year :  2010 <br> Quarter  : 3","Value:  925.761234219855 <br> Year :  2011 <br> Quarter  : 3","Value:  -1125.55338119462 <br> Year :  2012 <br> Quarter  : 3","Value:  -104.247161231877 <br> Year :  2013 <br> Quarter  : 3","Value:  221.11268678488 <br> Year :  2014 <br> Quarter  : 3","Value:  1215.15553755849 <br> Year :  2015 <br> Quarter  : 3","Value:  99.4948894796253 <br> Year :  2016 <br> Quarter  : 3","Value:  466.750934361364 <br> Year :  2017 <br> Quarter  : 3","Value:  631.502104261512 <br> Year :  2018 <br> Quarter  : 3","Value:  1390.26569682089 <br> Year :  2019 <br> Quarter  : 3","Value:  -3017.91038742414 <br> Year :  2020 <br> Quarter  : 3","Value:  127.058883909252 <br> Year :  2021 <br> Quarter  : 3","Value:  1734.04757803472 <br> Year :  2022 <br> Quarter  : 3","Value:  NA <br> Year :  2023 <br> Quarter  : 3"],["Value:  -338.864489533851 <br> Year :  2005 <br> Quarter  : 4","Value:  250.548420888605 <br> Year :  2006 <br> Quarter  : 4","Value:  1011.58587507476 <br> Year :  2007 <br> Quarter  : 4","Value:  -806.299988548883 <br> Year :  2008 <br> Quarter  : 4","Value:  166.669001664617 <br> Year :  2009 <br> Quarter  : 4","Value:  160.831748024502 <br> Year :  2010 <br> Quarter  : 4","Value:  -44.9797940942517 <br> Year :  2011 <br> Quarter  : 4","Value:  -719.705600955873 <br> Year :  2012 <br> Quarter  : 4","Value:  14.6266359925212 <br> Year :  2013 <br> Quarter  : 4","Value:  267.083803932124 <br> Year :  2014 <br> Quarter  : 4","Value:  -1070.82896064789 <br> Year :  2015 <br> Quarter  : 4","Value:  244.093711892114 <br> Year :  2016 <br> Quarter  : 4","Value:  -403.592586101615 <br> Year :  2017 <br> Quarter  : 4","Value:  -757.223243170272 <br> Year :  2018 <br> Quarter  : 4","Value:  5985.91274148499 <br> Year :  2019 <br> Quarter  : 4","Value:  4850.765293818 <br> Year :  2020 <br> Quarter  : 4","Value:  3993.54481328465 <br> Year :  2021 <br> Quarter  : 4","Value:  -1385.20897769887 <br> Year :  2022 <br> Quarter  : 4","Value:  NA <br> Year :  2023 <br> Quarter  : 4"]],"xgap":3,"ygap":3,"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"heatmap"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Mapa de Calor - PIB en Colombia(Promedio móvil)","xaxis":{"domain":[0,1],"automargin":true,"title":"Year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Quarter"},"scene":{"zaxis":{"title":[]}},"hovermode":"closest","showlegend":false,"legend":{"yanchor":"top","y":0.5}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"colorbar":{"title":"","ticklen":2,"len":0.5,"lenmode":"fraction","y":1,"yanchor":"top"},"colorscale":[[0,"#F7FBFF"],[0.48763618877988546,"#71B1D7"],[0.60009611846328603,"#4B97C9"],[0.64974420102328145,"#3D8BC3"],[0.65422695675258624,"#3B8AC2"],[0.65466530198376549,"#3B8AC2"],[0.6575943893670444,"#3B89C2"],[0.6576399512294242,"#3B89C2"],[0.65930404151143673,"#3A89C1"],[0.66283771663741031,"#3988C1"],[0.66330402093861296,"#3988C1"],[0.66672875352482042,"#3987C0"],[0.66730596914210727,"#3887C0"],[0.66734798400334183,"#3887C0"],[0.66884033667224974,"#3886C0"],[0.66998119377387388,"#3886C0"],[0.67409832579961515,"#3785BF"],[0.67880737662382751,"#3684BF"],[0.67911194348857773,"#3684BF"],[0.67959373221249386,"#3583BF"],[0.67965950319488833,"#3583BF"],[0.68028223984710523,"#3583BE"],[0.6815620197776332,"#3583BE"],[0.68163354496583561,"#3583BE"],[0.68387522601034134,"#3482BE"],[0.68501212586820792,"#3482BE"],[0.68869639255158832,"#3381BD"],[0.69049862725245592,"#3381BD"],[0.69071576417333436,"#3380BD"],[0.6908756574191347,"#3380BD"],[0.6910397622336758,"#3380BD"],[0.69110734028240473,"#3380BD"],[0.69231117236598816,"#3280BD"],[0.69243253220405876,"#3280BD"],[0.69315340167452588,"#3280BD"],[0.6931944639551485,"#3280BD"],[0.69371485961277501,"#3280BD"],[0.69394074970191644,"#3280BD"],[0.69489189290114062,"#327FBD"],[0.69573007400576503,"#317FBC"],[0.69675705783507624,"#317FBC"],[0.69693456025463796,"#317FBC"],[0.69854896435242708,"#317EBC"],[0.69859011377937952,"#317EBC"],[0.69914888307144374,"#307EBC"],[0.69928893343191434,"#307EBC"],[0.69948521177359368,"#307EBC"],[0.69998802879672839,"#307EBC"],[0.70020125832993685,"#307EBC"],[0.70271028828349813,"#2F7DBB"],[0.70291192340995801,"#2F7DBB"],[0.70521041801708895,"#2F7DBB"],[0.70605961672886364,"#2F7CBB"],[0.70675168644501918,"#2E7CBB"],[0.70864350209143145,"#2E7CBB"],[0.71106946092715761,"#2D7BBA"],[0.71474132493480846,"#2C7ABA"],[0.72001745441278986,"#2B79B9"],[0.72200666641059441,"#2A78B9"],[0.72262725730109822,"#2A78B9"],[0.72478100920960942,"#2978B8"],[0.72881751557459551,"#2876B8"],[0.73414236161954183,"#2675B7"],[0.73417129864380704,"#2675B7"],[0.74194653553352319,"#2473B6"],[0.7445962701661184,"#2372B6"],[0.75943911832230471,"#206FB3"],[0.81330430496756223,"#1761A8"],[0.83937113686721743,"#125AA3"],[0.84200742828672259,"#1159A3"],[0.87388932486156878,"#08519C"],[1,"#08306B"],[null,"#808080"]],"showscale":true,"z":[[null,551.7232647415949,219.75946780983941,-24.96196921824594,-939.28768628486432,-419.43644326925278,274.09596112961299,1082.4130570303823,-1237.7913691770227,991.17744096124079,-27.184306310373358,489.50998451863416,-262.79357435673592,-826.66368485084968,43.674110707739601,10133.123801068374,4937.4610229404934,356.60663487561396,2222.1618789175118],[null,-429.45227316222736,-584.31170625047525,60.787575720110908,-336.51234883500729,-37.839140547497664,-380.95067673324957,239.48808748161537,1646.9097622931295,-807.68166775238933,-225.40606803336414,18.617613458016422,-401.42967526725261,363.23750435226248,68.216081474354723,-22752.363926524878,-6716.2100248736097,752.25314302250626,-1223.3761724566284],[-1127.0517052607611,-32.580973175005056,438.82462054700591,1391.2173049772391,42.323757582256803,-954.62233065938926,925.7612342198554,-1125.5533811946225,-104.24716123187682,221.11268678487977,1215.1555375584867,99.494889479625272,466.75093436136376,631.5021042615117,1390.2656968208903,-3017.9103874241409,127.05888390925247,1734.0475780347188,null],[-338.86448953385116,250.5484208886046,1011.5858750747575,-806.29998854888254,166.6690016646171,160.8317480245023,-44.979794094251702,-719.7056009558728,14.626635992521187,267.08380393212428,-1070.8289606478938,244.09371189211379,-403.59258610161487,-757.22324317027233,5985.9127414849936,4850.7652938179963,3993.5448132846504,-1385.2089776988723,null]],"x":["2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021","2022","2023"],"y":[1,2,3,4],"hoverinfo":"text","text":[["Value:  NA <br> Year :  2005 <br> Quarter  : 1","Value:  551.723264741595 <br> Year :  2006 <br> Quarter  : 1","Value:  219.759467809839 <br> Year :  2007 <br> Quarter  : 1","Value:  -24.9619692182459 <br> Year :  2008 <br> Quarter  : 1","Value:  -939.287686284864 <br> Year :  2009 <br> Quarter  : 1","Value:  -419.436443269253 <br> Year :  2010 <br> Quarter  : 1","Value:  274.095961129613 <br> Year :  2011 <br> Quarter  : 1","Value:  1082.41305703038 <br> Year :  2012 <br> Quarter  : 1","Value:  -1237.79136917702 <br> Year :  2013 <br> Quarter  : 1","Value:  991.177440961241 <br> Year :  2014 <br> Quarter  : 1","Value:  -27.1843063103734 <br> Year :  2015 <br> Quarter  : 1","Value:  489.509984518634 <br> Year :  2016 <br> Quarter  : 1","Value:  -262.793574356736 <br> Year :  2017 <br> Quarter  : 1","Value:  -826.66368485085 <br> Year :  2018 <br> Quarter  : 1","Value:  43.6741107077396 <br> Year :  2019 <br> Quarter  : 1","Value:  10133.1238010684 <br> Year :  2020 <br> Quarter  : 1","Value:  4937.46102294049 <br> Year :  2021 <br> Quarter  : 1","Value:  356.606634875614 <br> Year :  2022 <br> Quarter  : 1","Value:  2222.16187891751 <br> Year :  2023 <br> Quarter  : 1"],["Value:  NA <br> Year :  2005 <br> Quarter  : 2","Value:  -429.452273162227 <br> Year :  2006 <br> Quarter  : 2","Value:  -584.311706250475 <br> Year :  2007 <br> Quarter  : 2","Value:  60.7875757201109 <br> Year :  2008 <br> Quarter  : 2","Value:  -336.512348835007 <br> Year :  2009 <br> Quarter  : 2","Value:  -37.8391405474977 <br> Year :  2010 <br> Quarter  : 2","Value:  -380.95067673325 <br> Year :  2011 <br> Quarter  : 2","Value:  239.488087481615 <br> Year :  2012 <br> Quarter  : 2","Value:  1646.90976229313 <br> Year :  2013 <br> Quarter  : 2","Value:  -807.681667752389 <br> Year :  2014 <br> Quarter  : 2","Value:  -225.406068033364 <br> Year :  2015 <br> Quarter  : 2","Value:  18.6176134580164 <br> Year :  2016 <br> Quarter  : 2","Value:  -401.429675267253 <br> Year :  2017 <br> Quarter  : 2","Value:  363.237504352262 <br> Year :  2018 <br> Quarter  : 2","Value:  68.2160814743547 <br> Year :  2019 <br> Quarter  : 2","Value:  -22752.3639265249 <br> Year :  2020 <br> Quarter  : 2","Value:  -6716.21002487361 <br> Year :  2021 <br> Quarter  : 2","Value:  752.253143022506 <br> Year :  2022 <br> Quarter  : 2","Value:  -1223.37617245663 <br> Year :  2023 <br> Quarter  : 2"],["Value:  -1127.05170526076 <br> Year :  2005 <br> Quarter  : 3","Value:  -32.5809731750051 <br> Year :  2006 <br> Quarter  : 3","Value:  438.824620547006 <br> Year :  2007 <br> Quarter  : 3","Value:  1391.21730497724 <br> Year :  2008 <br> Quarter  : 3","Value:  42.3237575822568 <br> Year :  2009 <br> Quarter  : 3","Value:  -954.622330659389 <br> Year :  2010 <br> Quarter  : 3","Value:  925.761234219855 <br> Year :  2011 <br> Quarter  : 3","Value:  -1125.55338119462 <br> Year :  2012 <br> Quarter  : 3","Value:  -104.247161231877 <br> Year :  2013 <br> Quarter  : 3","Value:  221.11268678488 <br> Year :  2014 <br> Quarter  : 3","Value:  1215.15553755849 <br> Year :  2015 <br> Quarter  : 3","Value:  99.4948894796253 <br> Year :  2016 <br> Quarter  : 3","Value:  466.750934361364 <br> Year :  2017 <br> Quarter  : 3","Value:  631.502104261512 <br> Year :  2018 <br> Quarter  : 3","Value:  1390.26569682089 <br> Year :  2019 <br> Quarter  : 3","Value:  -3017.91038742414 <br> Year :  2020 <br> Quarter  : 3","Value:  127.058883909252 <br> Year :  2021 <br> Quarter  : 3","Value:  1734.04757803472 <br> Year :  2022 <br> Quarter  : 3","Value:  NA <br> Year :  2023 <br> Quarter  : 3"],["Value:  -338.864489533851 <br> Year :  2005 <br> Quarter  : 4","Value:  250.548420888605 <br> Year :  2006 <br> Quarter  : 4","Value:  1011.58587507476 <br> Year :  2007 <br> Quarter  : 4","Value:  -806.299988548883 <br> Year :  2008 <br> Quarter  : 4","Value:  166.669001664617 <br> Year :  2009 <br> Quarter  : 4","Value:  160.831748024502 <br> Year :  2010 <br> Quarter  : 4","Value:  -44.9797940942517 <br> Year :  2011 <br> Quarter  : 4","Value:  -719.705600955873 <br> Year :  2012 <br> Quarter  : 4","Value:  14.6266359925212 <br> Year :  2013 <br> Quarter  : 4","Value:  267.083803932124 <br> Year :  2014 <br> Quarter  : 4","Value:  -1070.82896064789 <br> Year :  2015 <br> Quarter  : 4","Value:  244.093711892114 <br> Year :  2016 <br> Quarter  : 4","Value:  -403.592586101615 <br> Year :  2017 <br> Quarter  : 4","Value:  -757.223243170272 <br> Year :  2018 <br> Quarter  : 4","Value:  5985.91274148499 <br> Year :  2019 <br> Quarter  : 4","Value:  4850.765293818 <br> Year :  2020 <br> Quarter  : 4","Value:  3993.54481328465 <br> Year :  2021 <br> Quarter  : 4","Value:  -1385.20897769887 <br> Year :  2022 <br> Quarter  : 4","Value:  NA <br> Year :  2023 <br> Quarter  : 4"]],"xgap":3,"ygap":3,"type":"heatmap","xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tendencia extraída por diferencia ordinaria</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>TSstudio<span class="sc">::</span><span class="fu">ts_heatmap</span>(DiferenciaOrd,<span class="at">title =</span> <span class="st">"Mapa de Calor - PIB en Colombia(Diferencia Ordinaria)"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-f173c80eb2892fec000b" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-f173c80eb2892fec000b">{"x":{"visdat":{"3f28521e75c4":["function () ","plotlyVisDat"]},"cur_data":"3f28521e75c4","attrs":{"3f28521e75c4":{"z":[[null,2978.0701142409816,2303.3316037390032,391.93944451099378,99.798037536005722,1063.4914635619789,3047.5700729610107,2621.0474835879868,2087.4281814720016,2780.8785015179892,1385.1540569379868,2449.9007079769799,231.69591158800176,1037.1457275069843,2453.1256276729982,-2962.2223067370069,7744.7430522989889,1745.7517107539752,3415.2983794760075],[2745.7486021369987,1473.5443265820213,1540.5127731210086,756.1758151309914,1342.931638443988,2257.4320823610178,2273.6970683959953,244.00240137099172,5706.511097383016,78.441373262001434,1135.1139090820216,453.31982346100267,630.19170481900801,2690.3709360890207,1690.919879514986,-36333.133989455993,-5272.7936652549834,3113.7509854620148,-3544.529139405],[-271.81334423700173,2756.0086108009855,3096.6761962570017,1416.3216262210044,1710.102093035006,1464.055154200003,3875.1866970830015,-237.46260882599745,1194.6200200089952,2625.7151723270072,2568.1053403929982,963.09108467100305,1678.507231844007,1951.8205857120047,2284.1211026320234,19175.537946136988,12083.595267820987,2448.4055489309831,825.95040146997781],[2656.2173657570092,2566.2954468819953,2309.3349843350006,-2074.7985945199907,1690.3854644430103,3746.3353724249755,1290.7066007660178,2149.5378143260023,2447.8233152489993,1600.5104463419993,-1110.5716927280009,771.64601668299292,298.18673265099642,346.89674381999066,127.79330652698991,12530.673298683017,9405.2564520600135,-2276.2371238329797,90.869136504014023]],"x":["2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021","2022","2023"],"y":[1,2,3,4],"colorscale":[[0,"#F7FBFF"],[0.55955834000569304,"#59A1CE"],[0.59069337648891673,"#4E9ACA"],[0.60118375235926091,"#4B97C9"],[0.61354191476855036,"#4695C7"],[0.61717087079089439,"#4594C7"],[0.63454161428320477,"#408FC5"],[0.6496520163022661,"#3D8BC3"],[0.65027085177811506,"#3C8BC3"],[0.65596192618275118,"#3B8AC2"],[0.65618581486191885,"#3B8AC2"],[0.65634667082767406,"#3B8AC2"],[0.65685101128502588,"#3B89C2"],[0.65872283782019447,"#3A89C1"],[0.65894454173336448,"#3A89C1"],[0.65992068346745014,"#3A89C1"],[0.66079820421277646,"#3A88C1"],[0.66160965761492718,"#3A88C1"],[0.66271543760946972,"#3A88C1"],[0.66590182047885693,"#3987C0"],[0.66817144981638033,"#3886C0"],[0.66845014863969121,"#3886C0"],[0.66942845316209076,"#3886C0"],[0.67189907042636532,"#3785C0"],[0.67323317985924647,"#3785BF"],[0.67370780364569849,"#3785BF"],[0.67499809654989817,"#3785BF"],[0.67607011122529914,"#3684BF"],[0.67780113049501811,"#3684BF"],[0.67874197515688595,"#3684BF"],[0.67950262060239375,"#3583BF"],[0.68006411069387318,"#3583BF"],[0.68092403989618566,"#3583BE"],[0.6810949892641156,"#3583BE"],[0.68230143943133792,"#3583BE"],[0.6833823097013132,"#3482BE"],[0.68478743763506211,"#3482BE"],[0.68500142640807371,"#3482BE"],[0.6850110540041473,"#3482BE"],[0.68535662547705656,"#3482BE"],[0.68599886058151616,"#3482BE"],[0.68971123322118466,"#3381BD"],[0.69215423160380396,"#3280BD"],[0.69327314925555505,"#3280BD"],[0.69521688640999835,"#317FBC"],[0.69550990343720898,"#317FBC"],[0.69569769453133068,"#317FBC"],[0.69604377561086495,"#317FBC"],[0.69615192773172563,"#317FBC"],[0.69864682314328741,"#317EBC"],[0.69865731220133331,"#317EBC"],[0.69868424779524796,"#317EBC"],[0.69874234537862667,"#317EBC"],[0.70078112265905423,"#307EBC"],[0.7008137282582857,"#307EBC"],[0.70176749172170305,"#307EBC"],[0.70185158108245083,"#307EBC"],[0.70240108429278514,"#307DBB"],[0.70301636779968724,"#2F7DBB"],[0.70401400770201161,"#2F7DBB"],[0.7041988438421356,"#2F7DBB"],[0.70464687997504583,"#2F7DBB"],[0.70819932693237519,"#2E7CBB"],[0.70945138280574704,"#2E7CBB"],[0.7103360395915006,"#2D7BBA"],[0.71064364538730895,"#2D7BBA"],[0.7160760829416406,"#2C7ABA"],[0.72203978161079763,"#2A78B9"],[0.72436106439716175,"#2978B8"],[0.75735274545241937,"#206FB4"],[0.79407190813173811,"#1A66AC"],[0.82398639431666665,"#155EA6"],[0.87223721211444549,"#09529D"],[0.88029141365219399,"#08509A"],[1,"#08306B"]],"hoverinfo":"text","text":[["Value:  NA <br> Year :  2005 <br> Quarter  : 1","Value:  2978.07011424098 <br> Year :  2006 <br> Quarter  : 1","Value:  2303.331603739 <br> Year :  2007 <br> Quarter  : 1","Value:  391.939444510994 <br> Year :  2008 <br> Quarter  : 1","Value:  99.7980375360057 <br> Year :  2009 <br> Quarter  : 1","Value:  1063.49146356198 <br> Year :  2010 <br> Quarter  : 1","Value:  3047.57007296101 <br> Year :  2011 <br> Quarter  : 1","Value:  2621.04748358799 <br> Year :  2012 <br> Quarter  : 1","Value:  2087.428181472 <br> Year :  2013 <br> Quarter  : 1","Value:  2780.87850151799 <br> Year :  2014 <br> Quarter  : 1","Value:  1385.15405693799 <br> Year :  2015 <br> Quarter  : 1","Value:  2449.90070797698 <br> Year :  2016 <br> Quarter  : 1","Value:  231.695911588002 <br> Year :  2017 <br> Quarter  : 1","Value:  1037.14572750698 <br> Year :  2018 <br> Quarter  : 1","Value:  2453.125627673 <br> Year :  2019 <br> Quarter  : 1","Value:  -2962.22230673701 <br> Year :  2020 <br> Quarter  : 1","Value:  7744.74305229899 <br> Year :  2021 <br> Quarter  : 1","Value:  1745.75171075398 <br> Year :  2022 <br> Quarter  : 1","Value:  3415.29837947601 <br> Year :  2023 <br> Quarter  : 1"],["Value:  2745.748602137 <br> Year :  2005 <br> Quarter  : 2","Value:  1473.54432658202 <br> Year :  2006 <br> Quarter  : 2","Value:  1540.51277312101 <br> Year :  2007 <br> Quarter  : 2","Value:  756.175815130991 <br> Year :  2008 <br> Quarter  : 2","Value:  1342.93163844399 <br> Year :  2009 <br> Quarter  : 2","Value:  2257.43208236102 <br> Year :  2010 <br> Quarter  : 2","Value:  2273.697068396 <br> Year :  2011 <br> Quarter  : 2","Value:  244.002401370992 <br> Year :  2012 <br> Quarter  : 2","Value:  5706.51109738302 <br> Year :  2013 <br> Quarter  : 2","Value:  78.4413732620014 <br> Year :  2014 <br> Quarter  : 2","Value:  1135.11390908202 <br> Year :  2015 <br> Quarter  : 2","Value:  453.319823461003 <br> Year :  2016 <br> Quarter  : 2","Value:  630.191704819008 <br> Year :  2017 <br> Quarter  : 2","Value:  2690.37093608902 <br> Year :  2018 <br> Quarter  : 2","Value:  1690.91987951499 <br> Year :  2019 <br> Quarter  : 2","Value:  -36333.133989456 <br> Year :  2020 <br> Quarter  : 2","Value:  -5272.79366525498 <br> Year :  2021 <br> Quarter  : 2","Value:  3113.75098546201 <br> Year :  2022 <br> Quarter  : 2","Value:  -3544.529139405 <br> Year :  2023 <br> Quarter  : 2"],["Value:  -271.813344237002 <br> Year :  2005 <br> Quarter  : 3","Value:  2756.00861080099 <br> Year :  2006 <br> Quarter  : 3","Value:  3096.676196257 <br> Year :  2007 <br> Quarter  : 3","Value:  1416.321626221 <br> Year :  2008 <br> Quarter  : 3","Value:  1710.10209303501 <br> Year :  2009 <br> Quarter  : 3","Value:  1464.0551542 <br> Year :  2010 <br> Quarter  : 3","Value:  3875.186697083 <br> Year :  2011 <br> Quarter  : 3","Value:  -237.462608825997 <br> Year :  2012 <br> Quarter  : 3","Value:  1194.620020009 <br> Year :  2013 <br> Quarter  : 3","Value:  2625.71517232701 <br> Year :  2014 <br> Quarter  : 3","Value:  2568.105340393 <br> Year :  2015 <br> Quarter  : 3","Value:  963.091084671003 <br> Year :  2016 <br> Quarter  : 3","Value:  1678.50723184401 <br> Year :  2017 <br> Quarter  : 3","Value:  1951.820585712 <br> Year :  2018 <br> Quarter  : 3","Value:  2284.12110263202 <br> Year :  2019 <br> Quarter  : 3","Value:  19175.537946137 <br> Year :  2020 <br> Quarter  : 3","Value:  12083.595267821 <br> Year :  2021 <br> Quarter  : 3","Value:  2448.40554893098 <br> Year :  2022 <br> Quarter  : 3","Value:  825.950401469978 <br> Year :  2023 <br> Quarter  : 3"],["Value:  2656.21736575701 <br> Year :  2005 <br> Quarter  : 4","Value:  2566.295446882 <br> Year :  2006 <br> Quarter  : 4","Value:  2309.334984335 <br> Year :  2007 <br> Quarter  : 4","Value:  -2074.79859451999 <br> Year :  2008 <br> Quarter  : 4","Value:  1690.38546444301 <br> Year :  2009 <br> Quarter  : 4","Value:  3746.33537242498 <br> Year :  2010 <br> Quarter  : 4","Value:  1290.70660076602 <br> Year :  2011 <br> Quarter  : 4","Value:  2149.537814326 <br> Year :  2012 <br> Quarter  : 4","Value:  2447.823315249 <br> Year :  2013 <br> Quarter  : 4","Value:  1600.510446342 <br> Year :  2014 <br> Quarter  : 4","Value:  -1110.571692728 <br> Year :  2015 <br> Quarter  : 4","Value:  771.646016682993 <br> Year :  2016 <br> Quarter  : 4","Value:  298.186732650996 <br> Year :  2017 <br> Quarter  : 4","Value:  346.896743819991 <br> Year :  2018 <br> Quarter  : 4","Value:  127.79330652699 <br> Year :  2019 <br> Quarter  : 4","Value:  12530.673298683 <br> Year :  2020 <br> Quarter  : 4","Value:  9405.25645206001 <br> Year :  2021 <br> Quarter  : 4","Value:  -2276.23712383298 <br> Year :  2022 <br> Quarter  : 4","Value:  90.869136504014 <br> Year :  2023 <br> Quarter  : 4"]],"xgap":3,"ygap":3,"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"heatmap"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Mapa de Calor - PIB en Colombia(Diferencia Ordinaria)","xaxis":{"domain":[0,1],"automargin":true,"title":"Year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Quarter"},"scene":{"zaxis":{"title":[]}},"hovermode":"closest","showlegend":false,"legend":{"yanchor":"top","y":0.5}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"colorbar":{"title":"","ticklen":2,"len":0.5,"lenmode":"fraction","y":1,"yanchor":"top"},"colorscale":[[0,"#F7FBFF"],[0.55955834000569304,"#59A1CE"],[0.59069337648891673,"#4E9ACA"],[0.60118375235926091,"#4B97C9"],[0.61354191476855036,"#4695C7"],[0.61717087079089439,"#4594C7"],[0.63454161428320477,"#408FC5"],[0.6496520163022661,"#3D8BC3"],[0.65027085177811506,"#3C8BC3"],[0.65596192618275118,"#3B8AC2"],[0.65618581486191885,"#3B8AC2"],[0.65634667082767406,"#3B8AC2"],[0.65685101128502588,"#3B89C2"],[0.65872283782019447,"#3A89C1"],[0.65894454173336448,"#3A89C1"],[0.65992068346745014,"#3A89C1"],[0.66079820421277646,"#3A88C1"],[0.66160965761492718,"#3A88C1"],[0.66271543760946972,"#3A88C1"],[0.66590182047885693,"#3987C0"],[0.66817144981638033,"#3886C0"],[0.66845014863969121,"#3886C0"],[0.66942845316209076,"#3886C0"],[0.67189907042636532,"#3785C0"],[0.67323317985924647,"#3785BF"],[0.67370780364569849,"#3785BF"],[0.67499809654989817,"#3785BF"],[0.67607011122529914,"#3684BF"],[0.67780113049501811,"#3684BF"],[0.67874197515688595,"#3684BF"],[0.67950262060239375,"#3583BF"],[0.68006411069387318,"#3583BF"],[0.68092403989618566,"#3583BE"],[0.6810949892641156,"#3583BE"],[0.68230143943133792,"#3583BE"],[0.6833823097013132,"#3482BE"],[0.68478743763506211,"#3482BE"],[0.68500142640807371,"#3482BE"],[0.6850110540041473,"#3482BE"],[0.68535662547705656,"#3482BE"],[0.68599886058151616,"#3482BE"],[0.68971123322118466,"#3381BD"],[0.69215423160380396,"#3280BD"],[0.69327314925555505,"#3280BD"],[0.69521688640999835,"#317FBC"],[0.69550990343720898,"#317FBC"],[0.69569769453133068,"#317FBC"],[0.69604377561086495,"#317FBC"],[0.69615192773172563,"#317FBC"],[0.69864682314328741,"#317EBC"],[0.69865731220133331,"#317EBC"],[0.69868424779524796,"#317EBC"],[0.69874234537862667,"#317EBC"],[0.70078112265905423,"#307EBC"],[0.7008137282582857,"#307EBC"],[0.70176749172170305,"#307EBC"],[0.70185158108245083,"#307EBC"],[0.70240108429278514,"#307DBB"],[0.70301636779968724,"#2F7DBB"],[0.70401400770201161,"#2F7DBB"],[0.7041988438421356,"#2F7DBB"],[0.70464687997504583,"#2F7DBB"],[0.70819932693237519,"#2E7CBB"],[0.70945138280574704,"#2E7CBB"],[0.7103360395915006,"#2D7BBA"],[0.71064364538730895,"#2D7BBA"],[0.7160760829416406,"#2C7ABA"],[0.72203978161079763,"#2A78B9"],[0.72436106439716175,"#2978B8"],[0.75735274545241937,"#206FB4"],[0.79407190813173811,"#1A66AC"],[0.82398639431666665,"#155EA6"],[0.87223721211444549,"#09529D"],[0.88029141365219399,"#08509A"],[1,"#08306B"]],"showscale":true,"z":[[null,2978.0701142409816,2303.3316037390032,391.93944451099378,99.798037536005722,1063.4914635619789,3047.5700729610107,2621.0474835879868,2087.4281814720016,2780.8785015179892,1385.1540569379868,2449.9007079769799,231.69591158800176,1037.1457275069843,2453.1256276729982,-2962.2223067370069,7744.7430522989889,1745.7517107539752,3415.2983794760075],[2745.7486021369987,1473.5443265820213,1540.5127731210086,756.1758151309914,1342.931638443988,2257.4320823610178,2273.6970683959953,244.00240137099172,5706.511097383016,78.441373262001434,1135.1139090820216,453.31982346100267,630.19170481900801,2690.3709360890207,1690.919879514986,-36333.133989455993,-5272.7936652549834,3113.7509854620148,-3544.529139405],[-271.81334423700173,2756.0086108009855,3096.6761962570017,1416.3216262210044,1710.102093035006,1464.055154200003,3875.1866970830015,-237.46260882599745,1194.6200200089952,2625.7151723270072,2568.1053403929982,963.09108467100305,1678.507231844007,1951.8205857120047,2284.1211026320234,19175.537946136988,12083.595267820987,2448.4055489309831,825.95040146997781],[2656.2173657570092,2566.2954468819953,2309.3349843350006,-2074.7985945199907,1690.3854644430103,3746.3353724249755,1290.7066007660178,2149.5378143260023,2447.8233152489993,1600.5104463419993,-1110.5716927280009,771.64601668299292,298.18673265099642,346.89674381999066,127.79330652698991,12530.673298683017,9405.2564520600135,-2276.2371238329797,90.869136504014023]],"x":["2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021","2022","2023"],"y":[1,2,3,4],"hoverinfo":"text","text":[["Value:  NA <br> Year :  2005 <br> Quarter  : 1","Value:  2978.07011424098 <br> Year :  2006 <br> Quarter  : 1","Value:  2303.331603739 <br> Year :  2007 <br> Quarter  : 1","Value:  391.939444510994 <br> Year :  2008 <br> Quarter  : 1","Value:  99.7980375360057 <br> Year :  2009 <br> Quarter  : 1","Value:  1063.49146356198 <br> Year :  2010 <br> Quarter  : 1","Value:  3047.57007296101 <br> Year :  2011 <br> Quarter  : 1","Value:  2621.04748358799 <br> Year :  2012 <br> Quarter  : 1","Value:  2087.428181472 <br> Year :  2013 <br> Quarter  : 1","Value:  2780.87850151799 <br> Year :  2014 <br> Quarter  : 1","Value:  1385.15405693799 <br> Year :  2015 <br> Quarter  : 1","Value:  2449.90070797698 <br> Year :  2016 <br> Quarter  : 1","Value:  231.695911588002 <br> Year :  2017 <br> Quarter  : 1","Value:  1037.14572750698 <br> Year :  2018 <br> Quarter  : 1","Value:  2453.125627673 <br> Year :  2019 <br> Quarter  : 1","Value:  -2962.22230673701 <br> Year :  2020 <br> Quarter  : 1","Value:  7744.74305229899 <br> Year :  2021 <br> Quarter  : 1","Value:  1745.75171075398 <br> Year :  2022 <br> Quarter  : 1","Value:  3415.29837947601 <br> Year :  2023 <br> Quarter  : 1"],["Value:  2745.748602137 <br> Year :  2005 <br> Quarter  : 2","Value:  1473.54432658202 <br> Year :  2006 <br> Quarter  : 2","Value:  1540.51277312101 <br> Year :  2007 <br> Quarter  : 2","Value:  756.175815130991 <br> Year :  2008 <br> Quarter  : 2","Value:  1342.93163844399 <br> Year :  2009 <br> Quarter  : 2","Value:  2257.43208236102 <br> Year :  2010 <br> Quarter  : 2","Value:  2273.697068396 <br> Year :  2011 <br> Quarter  : 2","Value:  244.002401370992 <br> Year :  2012 <br> Quarter  : 2","Value:  5706.51109738302 <br> Year :  2013 <br> Quarter  : 2","Value:  78.4413732620014 <br> Year :  2014 <br> Quarter  : 2","Value:  1135.11390908202 <br> Year :  2015 <br> Quarter  : 2","Value:  453.319823461003 <br> Year :  2016 <br> Quarter  : 2","Value:  630.191704819008 <br> Year :  2017 <br> Quarter  : 2","Value:  2690.37093608902 <br> Year :  2018 <br> Quarter  : 2","Value:  1690.91987951499 <br> Year :  2019 <br> Quarter  : 2","Value:  -36333.133989456 <br> Year :  2020 <br> Quarter  : 2","Value:  -5272.79366525498 <br> Year :  2021 <br> Quarter  : 2","Value:  3113.75098546201 <br> Year :  2022 <br> Quarter  : 2","Value:  -3544.529139405 <br> Year :  2023 <br> Quarter  : 2"],["Value:  -271.813344237002 <br> Year :  2005 <br> Quarter  : 3","Value:  2756.00861080099 <br> Year :  2006 <br> Quarter  : 3","Value:  3096.676196257 <br> Year :  2007 <br> Quarter  : 3","Value:  1416.321626221 <br> Year :  2008 <br> Quarter  : 3","Value:  1710.10209303501 <br> Year :  2009 <br> Quarter  : 3","Value:  1464.0551542 <br> Year :  2010 <br> Quarter  : 3","Value:  3875.186697083 <br> Year :  2011 <br> Quarter  : 3","Value:  -237.462608825997 <br> Year :  2012 <br> Quarter  : 3","Value:  1194.620020009 <br> Year :  2013 <br> Quarter  : 3","Value:  2625.71517232701 <br> Year :  2014 <br> Quarter  : 3","Value:  2568.105340393 <br> Year :  2015 <br> Quarter  : 3","Value:  963.091084671003 <br> Year :  2016 <br> Quarter  : 3","Value:  1678.50723184401 <br> Year :  2017 <br> Quarter  : 3","Value:  1951.820585712 <br> Year :  2018 <br> Quarter  : 3","Value:  2284.12110263202 <br> Year :  2019 <br> Quarter  : 3","Value:  19175.537946137 <br> Year :  2020 <br> Quarter  : 3","Value:  12083.595267821 <br> Year :  2021 <br> Quarter  : 3","Value:  2448.40554893098 <br> Year :  2022 <br> Quarter  : 3","Value:  825.950401469978 <br> Year :  2023 <br> Quarter  : 3"],["Value:  2656.21736575701 <br> Year :  2005 <br> Quarter  : 4","Value:  2566.295446882 <br> Year :  2006 <br> Quarter  : 4","Value:  2309.334984335 <br> Year :  2007 <br> Quarter  : 4","Value:  -2074.79859451999 <br> Year :  2008 <br> Quarter  : 4","Value:  1690.38546444301 <br> Year :  2009 <br> Quarter  : 4","Value:  3746.33537242498 <br> Year :  2010 <br> Quarter  : 4","Value:  1290.70660076602 <br> Year :  2011 <br> Quarter  : 4","Value:  2149.537814326 <br> Year :  2012 <br> Quarter  : 4","Value:  2447.823315249 <br> Year :  2013 <br> Quarter  : 4","Value:  1600.510446342 <br> Year :  2014 <br> Quarter  : 4","Value:  -1110.571692728 <br> Year :  2015 <br> Quarter  : 4","Value:  771.646016682993 <br> Year :  2016 <br> Quarter  : 4","Value:  298.186732650996 <br> Year :  2017 <br> Quarter  : 4","Value:  346.896743819991 <br> Year :  2018 <br> Quarter  : 4","Value:  127.79330652699 <br> Year :  2019 <br> Quarter  : 4","Value:  12530.673298683 <br> Year :  2020 <br> Quarter  : 4","Value:  9405.25645206001 <br> Year :  2021 <br> Quarter  : 4","Value:  -2276.23712383298 <br> Year :  2022 <br> Quarter  : 4","Value:  90.869136504014 <br> Year :  2023 <br> Quarter  : 4"]],"xgap":3,"ygap":3,"type":"heatmap","xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">monthplot</span>(STLextra,<span class="at">main=</span><span class="st">"Subseries(STL)"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="PIBQuarto---Descriptiva_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">monthplot</span>(ExtraProm,<span class="at">main=</span><span class="st">"Subseries(Promedio móvil)"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="PIBQuarto---Descriptiva_files/figure-html/unnamed-chunk-17-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">monthplot</span>(DiferenciaOrd,<span class="at">main=</span><span class="st">"Subseries(Diferencia Ordinaria)"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="PIBQuarto---Descriptiva_files/figure-html/unnamed-chunk-17-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Otra alternativa es utilizar los gráficos de cajas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>tsibblePIB <span class="ot">&lt;-</span> tsibblePIB <span class="sc">%&gt;%</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">index =</span> <span class="fu">as.Date</span>(index))</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>tsibblePIB<span class="ot">&lt;-</span>tsibblePIB<span class="sc">%&gt;%</span><span class="fu">mutate</span>(<span class="at">Diferencia=</span>value<span class="sc">-</span><span class="fu">lag</span>(value))</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>tsibblePIB <span class="sc">%&gt;%</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_seasonal_diagnostics</span>(<span class="at">.date_var =</span> index, <span class="at">.value =</span> Diferencia, <span class="at">.feature_set =</span> <span class="fu">c</span>(<span class="st">"quarter"</span>), <span class="at">.geom =</span> <span class="st">"boxplot"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-bea21790979b1bc60d93" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-bea21790979b1bc60d93">{"x":{"data":[{"x":[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"y":[2745.7486021369987,1135.1139090820216,244.00240137099172,1342.931638443988,1473.5443265820213,453.31982346100267,5706.511097383016,2257.4320823610178,1540.5127731210086,630.19170481900801,78.441373262001434,2273.6970683959953,756.1758151309914,2690.3709360890207,3113.7509854620148,1690.919879514986,-3544.529139405,-36333.133989455993,-5272.7936652549834,-271.81334423700173,2568.1053403929982,2756.0086108009855,963.09108467100305,3096.6761962570017,1678.507231844007,2625.7151723270072,1416.3216262210044,1951.8205857120047,-237.46260882599745,1710.102093035006,2284.1211026320234,1194.6200200089952,1464.055154200003,19175.537946136988,3875.1866970830015,12083.595267820987,2448.4055489309831,825.95040146997781,2656.2173657570092,2566.2954468819953,2309.3349843350006,298.18673265099642,-2074.7985945199907,346.89674381999066,-1110.5716927280009,1690.3854644430103,127.79330652698991,771.64601668299292,3746.3353724249755,12530.673298683017,1600.5104463419993,1290.7066007660178,9405.2564520600135,2149.5378143260023,-2276.2371238329797,2447.8233152489993,90.869136504014023,391.93944451099378,99.798037536005722,2978.0701142409816,1063.4914635619789,2303.3316037390032,3047.5700729610107,7744.7430522989889,1037.1457275069843,1385.1540569379868,2621.0474835879868,1745.7517107539752,2453.1256276729982,2449.9007079769799,2087.4281814720016,3415.2983794760075,-2962.2223067370069,231.69591158800176,2780.8785015179892],"hoverinfo":"y","type":"box","fillcolor":"rgba(255,255,255,1)","marker":{"opacity":null,"outliercolor":"rgba(0,0,0,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"},"size":5.6692913385826778},"line":{"color":"rgba(44,62,80,1)","width":1.8897637795275593},"showlegend":false,"xaxis":"x","yaxis":"y","frame":null}],"layout":{"margin":{"t":55.452054794520549,"r":7.3059360730593621,"b":25.570776255707766,"l":46.027397260273986},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(44,62,80,1)","family":"","size":14.611872146118724},"title":{"text":"Seasonal Diagnostics","font":{"color":"rgba(44,62,80,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.40000000000000002,4.5999999999999996],"tickmode":"array","ticktext":["1","2","3","4"],"tickvals":[1,2,3,4],"categoryorder":"array","categoryarray":["1","2","3","4"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.6529680365296811,"tickwidth":0.22139200221392005,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392005,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-39108.567586235644,21950.971542916639],"tickmode":"array","ticktext":["-20000","0","20000"],"tickvals":[-20000,0,20000],"categoryorder":"array","categoryarray":["-20000","0","20000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.6529680365296811,"tickwidth":0.22139200221392005,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392005,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(44,62,80,1)","width":0.33208800332088001,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1},{"type":"rect","fillcolor":"rgba(44,62,80,1)","line":{"color":"rgba(44,62,80,1)","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":24.973017849730184,"yanchor":1,"ysizemode":"pixel"}],"annotations":[{"text":"quarter","x":0.5,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.68949771689498},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(44,62,80,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"3f2820b3203":{"x":{},"y":{},"type":"box"}},"cur_data":"3f2820b3203","visdat":{"3f2820b3203":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Finalmente, un gráfico con las estimaciones de las densidades.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tsibblePIB <span class="sc">%&gt;%</span><span class="fu">na.omit</span>()<span class="sc">|&gt;</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">Trimestre =</span> <span class="fu">str_c</span>(<span class="st">"Trimestre "</span>, <span class="fu">as.character</span>(lubridate<span class="sc">::</span><span class="fu">quarter</span>(index)))</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>    ), <span class="fu">aes</span>(<span class="at">x =</span> Diferencia)) <span class="sc">+</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Trimestre)) <span class="sc">+</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggtitle</span>(<span class="st">"LosPass - Estimación de la densidad vía Kernel por trimestre"</span>) <span class="sc">+</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">facet_grid</span>(<span class="at">rows =</span> <span class="fu">vars</span>(<span class="fu">as.factor</span>(Trimestre)))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="PIBQuarto---Descriptiva_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="encontrando-el-periodo-de-la-serie" class="level4">
<h4 class="anchored" data-anchor-id="encontrando-el-periodo-de-la-serie">Encontrando el periodo de la serie</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co">#STL</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>PeriodgramadTra1<span class="ot">=</span><span class="fu">spectrum</span>(<span class="fu">as.numeric</span>(STLextra),<span class="at">log=</span><span class="st">'no'</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="PIBQuarto---Descriptiva_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>ubicacion1<span class="ot">=</span><span class="fu">which.max</span>(PeriodgramadTra1<span class="sc">$</span>spec)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Promedio móvil</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>PeriodgramadTra2<span class="ot">=</span><span class="fu">spectrum</span>(<span class="fu">as.numeric</span>(ExtraProm[<span class="dv">3</span><span class="sc">:</span><span class="dv">74</span>]),<span class="at">log=</span><span class="st">'no'</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="PIBQuarto---Descriptiva_files/figure-html/unnamed-chunk-20-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>ubicacion2<span class="ot">=</span><span class="fu">which.max</span>(PeriodgramadTra2<span class="sc">$</span>spec)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Diferencia ordinaria</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>PeriodgramadTra3<span class="ot">=</span><span class="fu">spectrum</span>(<span class="fu">as.numeric</span>(DiferenciaOrd),<span class="at">log=</span><span class="st">'no'</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="PIBQuarto---Descriptiva_files/figure-html/unnamed-chunk-20-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>ubicacion3<span class="ot">=</span><span class="fu">which.max</span>(PeriodgramadTra3<span class="sc">$</span>spec)</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sprintf</span>(<span class="st">"El valor de la frecuencia donde se máximiza el periodograma para la serie con tendencia STL extraída es: %s"</span>,PeriodgramadTra1<span class="sc">$</span>freq[ubicacion1])</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "El valor de la frecuencia donde se máximiza el periodograma para la serie con tendencia STL extraída es: 0.5"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sprintf</span>(<span class="st">"El periodo correspondiente es aproximadamente: %s"</span>,<span class="dv">1</span><span class="sc">/</span>PeriodgramadTra1<span class="sc">$</span>freq[ubicacion1])</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "El periodo correspondiente es aproximadamente: 2"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sprintf</span>(<span class="st">"El valor de la frecuencia donde se máximiza el periodograma para la serie con tendencia extraída por promedio móvil es: %s"</span>,PeriodgramadTra2<span class="sc">$</span>freq[ubicacion2])</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "El valor de la frecuencia donde se máximiza el periodograma para la serie con tendencia extraída por promedio móvil es: 0.263888888888889"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sprintf</span>(<span class="st">"El periodo correspondiente es aproximadamente: %s"</span>,<span class="dv">1</span><span class="sc">/</span>PeriodgramadTra2<span class="sc">$</span>freq[ubicacion2])</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "El periodo correspondiente es aproximadamente: 3.78947368421053"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sprintf</span>(<span class="st">"El valor de la frecuencia donde se máximiza el periodograma para la serie con tendencia extraída por diferencia ordinaria es: %s"</span>,PeriodgramadTra3<span class="sc">$</span>freq[ubicacion3])</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "El valor de la frecuencia donde se máximiza el periodograma para la serie con tendencia extraída por diferencia ordinaria es: 0.226666666666667"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sprintf</span>(<span class="st">"El periodo correspondiente es aproximadamente: %s"</span>,<span class="dv">1</span><span class="sc">/</span>PeriodgramadTra3<span class="sc">$</span>freq[ubicacion3])</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "El periodo correspondiente es aproximadamente: 4.41176470588235"</code></pre>
</div>
</div>
<p>De acuerdo a la información reportada en el gráfico de periodograma, no es necesario modelar la estacionalidad.</p>
</section>
</section>
</section>
<section id="suavizamiento-exponencial" class="level2">
<h2 class="anchored" data-anchor-id="suavizamiento-exponencial">Suavizamiento Exponencial</h2>
<p>El suavizamiento exponencial es un modelo que contiene 3 parámetros, dos relacionados a la estimación de la componente de tendencia, y el tercero a la componente de estacionalidad. Teniendo en cuenta que para este conjunto de datos no se requiere modelar la estacionalidad, solo se tendrán en cuenta los parámetros correspondientes a la compente de tendencia.</p>
<span class="math display">\[\begin{align*}
a_t &amp; = \alpha(x_t-s_{t-p}) + (1-\alpha)(a_{t-1}+b_{t-1}) \\
b_t &amp; = \beta(a_t-a_{t-1}) + (1-\beta)b_{t-1} \\
\end{align*}\]</span>
<p>El siguiente modelo se manejará con los datos originales, por lo tanto, para evaluar la capacidad predictiva del modelo, utilizando la predicción a un paso, emplearemos el 80% de la serie como conjunto de entrenamiento y el 20% restante como prueba. Es decir, el periodo de entrenamiento corresponde a los primeros 61 trimestres, es decir, de enero de 2005 hasta marzo de 2020, por otro lado, el periodo de prueba corresponde a abril de 2020 hasta diciembre de 2023.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>Train<span class="ot">=</span><span class="fu">ts</span>(PIB3TS[<span class="dv">1</span><span class="sc">:</span><span class="dv">61</span>], <span class="at">start =</span> <span class="fu">c</span>(<span class="dv">2005</span>, <span class="dv">1</span>),<span class="at">frequency =</span> <span class="dv">4</span>) </span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>Test<span class="ot">=</span><span class="fu">ts</span>(PIB3TS[<span class="dv">62</span><span class="sc">:</span><span class="dv">76</span>],<span class="at">start=</span><span class="fu">c</span>(<span class="dv">2020</span>,<span class="dv">2</span>),<span class="at">frequency =</span> <span class="dv">4</span>) </span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>HWAP<span class="ot">=</span>stats<span class="sc">::</span><span class="fu">HoltWinters</span>(Train,<span class="at">seasonal=</span><span class="cn">NULL</span>) </span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(<span class="at">x =</span> <span class="fu">time</span>(PIB3TS[<span class="dv">5</span><span class="sc">:</span><span class="dv">61</span>]), <span class="at">y =</span> PIB3TS[<span class="dv">5</span><span class="sc">:</span><span class="dv">61</span>], <span class="at">type =</span> <span class="st">'scatter'</span>, <span class="at">mode =</span> <span class="st">'lines'</span>, <span class="at">color =</span> <span class="fu">I</span>(<span class="st">"red"</span>), <span class="at">name =</span> <span class="st">"Original"</span>) <span class="sc">%&gt;%</span> <span class="fu">add_trace</span>(<span class="at">y =</span> HWAP<span class="sc">$</span>fitted[,<span class="dv">1</span>], <span class="at">mode =</span> <span class="st">'lines'</span>, <span class="at">line =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">'blue'</span>), <span class="at">name =</span> <span class="st">"EWMA"</span>) <span class="sc">%&gt;%</span>   <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">'Suavizamiento Exponencial'</span>,<span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">'Trimestre'</span>, <span class="at">rangeslider =</span> <span class="fu">list</span>(<span class="at">type =</span> <span class="st">'date'</span>))) </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-bd9bb37bdd168782455d" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-bd9bb37bdd168782455d">{"x":{"visdat":{"3f283b60c6a":["function () ","plotlyVisDat"]},"cur_data":"3f283b60c6a","attrs":{"3f283b60c6a":{"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57],"y":[134234.01358794299,135707.55791452501,138463.56652532599,141029.86197220799,143333.19357594699,144873.706349068,147970.382545325,150279.71752966,150671.656974171,151427.83278930199,152844.15441552299,150769.355821003,150869.15385853901,152212.085496983,153922.187590018,155612.57305446101,156676.06451802299,158933.49660038401,160397.55175458401,164143.88712700899,167191.45719997,169465.15426836599,173340.340965449,174631.04756621501,177252.095049803,177496.09745117399,177258.63484234799,179408.172656674,181495.600838146,187202.11193552901,188396.73195553801,190844.55527078701,193625.433772305,193703.875145567,196329.59031789401,197930.10076423601,199315.25482117399,200450.36873025601,203018.47407064901,201907.90237792101,204357.80308589799,204811.12290935899,205774.21399403,206545.86001071299,206777.55592230099,207407.74762712,209086.25485896401,209384.441591615,210421.58731912199,213111.95825521101,215063.77884092301,215410.675584743,217863.801212416,219554.72109193099,221838.84219456301,221966.63550109,219004.41319435299],"mode":"lines","name":"Original","color":["red"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"3f283b60c6a.1":{"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57],"y":[130475.12921486645,135190.29505501152,137407.70373070723,141661.92456861713,144987.1440112186,144515.29000884038,146596.34475475617,150865.71134554295,154059.1115499842,152164.61384761808,153164.20576242087,155313.35870057537,153998.75818926617,151992.37851002827,153273.22883461131,155188.70080898411,158238.51821442996,158009.18559412329,159992.80846683789,161681.37404683928,166421.88466803278,168899.76606747671,170830.84368654387,175109.14760587129,177332.81527734513,179240.02478837947,179428.99618483213,178898.42161110224,181762.06526873962,183006.26659947596,188486.79900382156,190452.86243989991,193442.60493104835,196020.47805871681,195134.39760818283,198239.03051364832,200494.73358482702,201359.75806960862,202059.94252339934,204651.62689382356,204373.57143461736,206075.48812873891,206470.0431213608,206774.54004932687,208867.45837201484,208269.05168119317,208786.33809156338,209793.85163178551,211249.98889918445,211768.73110021744,214386.92807006845,215691.5386813393,217276.19649723332,219490.02046532213,220990.62847574797,222415.27342158617,224048.32254471106],"mode":"lines","name":"EWMA","color":["red"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","line":{"color":"blue"},"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Suavizamiento Exponencial","xaxis":{"domain":[0,1],"automargin":true,"title":"Trimestre","rangeslider":{"type":"date"}},"yaxis":{"domain":[0,1],"automargin":true,"title":[]},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57],"y":[134234.01358794299,135707.55791452501,138463.56652532599,141029.86197220799,143333.19357594699,144873.706349068,147970.382545325,150279.71752966,150671.656974171,151427.83278930199,152844.15441552299,150769.355821003,150869.15385853901,152212.085496983,153922.187590018,155612.57305446101,156676.06451802299,158933.49660038401,160397.55175458401,164143.88712700899,167191.45719997,169465.15426836599,173340.340965449,174631.04756621501,177252.095049803,177496.09745117399,177258.63484234799,179408.172656674,181495.600838146,187202.11193552901,188396.73195553801,190844.55527078701,193625.433772305,193703.875145567,196329.59031789401,197930.10076423601,199315.25482117399,200450.36873025601,203018.47407064901,201907.90237792101,204357.80308589799,204811.12290935899,205774.21399403,206545.86001071299,206777.55592230099,207407.74762712,209086.25485896401,209384.441591615,210421.58731912199,213111.95825521101,215063.77884092301,215410.675584743,217863.801212416,219554.72109193099,221838.84219456301,221966.63550109,219004.41319435299],"mode":"lines","name":"Original","type":"scatter","marker":{"color":"rgba(255,0,0,1)","line":{"color":"rgba(255,0,0,1)"}},"textfont":{"color":"rgba(255,0,0,1)"},"error_y":{"color":"rgba(255,0,0,1)"},"error_x":{"color":"rgba(255,0,0,1)"},"line":{"color":"rgba(255,0,0,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57],"y":[130475.12921486645,135190.29505501152,137407.70373070723,141661.92456861713,144987.1440112186,144515.29000884038,146596.34475475617,150865.71134554295,154059.1115499842,152164.61384761808,153164.20576242087,155313.35870057537,153998.75818926617,151992.37851002827,153273.22883461131,155188.70080898411,158238.51821442996,158009.18559412329,159992.80846683789,161681.37404683928,166421.88466803278,168899.76606747671,170830.84368654387,175109.14760587129,177332.81527734513,179240.02478837947,179428.99618483213,178898.42161110224,181762.06526873962,183006.26659947596,188486.79900382156,190452.86243989991,193442.60493104835,196020.47805871681,195134.39760818283,198239.03051364832,200494.73358482702,201359.75806960862,202059.94252339934,204651.62689382356,204373.57143461736,206075.48812873891,206470.0431213608,206774.54004932687,208867.45837201484,208269.05168119317,208786.33809156338,209793.85163178551,211249.98889918445,211768.73110021744,214386.92807006845,215691.5386813393,217276.19649723332,219490.02046532213,220990.62847574797,222415.27342158617,224048.32254471106],"mode":"lines","name":"EWMA","type":"scatter","line":{"color":"blue"},"marker":{"color":"rgba(255,0,0,1)","line":{"color":"rgba(255,0,0,1)"}},"textfont":{"color":"rgba(255,0,0,1)"},"error_y":{"color":"rgba(255,0,0,1)"},"error_x":{"color":"rgba(255,0,0,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>ajustados<span class="ot">=</span><span class="fu">fitted</span>(HWAP)<span class="co">#Guarda las estimaciones que hace el modelo para cada trimestre desde enero de 2004 hasta marzo de 2020 </span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ajustados)<span class="co">#Gráfico de las tres componentes, nivel, pendiente y estacionalidad </span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="PIBQuarto---Descriptiva_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>HWAP</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Holt-Winters exponential smoothing with trend and additive seasonal component.

Call:
stats::HoltWinters(x = Train, seasonal = NULL)

Smoothing parameters:
 alpha: 0.8704311
 beta : 0.08945198
 gamma: 1

Coefficients:
           [,1]
a  219922.86730
b    1060.45471
s1    -47.35115
s2     76.38751
s3   -893.42502
s4   -918.45411</code></pre>
</div>
</div>
<p>La estimación del parámetro de Nivel alpha es 0.8704311, de Pendiente beta 0.08945198 y de estacionalidad gamma 1.</p>
<p>Por último evaluaremos la capacidad predictiva del modelo haciendo las 15 predicciones para el periodo correspondiente a prueba. Abril de 2020 hasta diciembre de 2023.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>predictionHWAP_1<span class="ot">=</span>forecast<span class="sc">::</span><span class="fu">forecast</span>(HWAP,<span class="at">h=</span><span class="dv">15</span>) </span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>predictionHWAP_1 </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        Point Forecast    Lo 80    Hi 80    Lo 95    Hi 95
2020 Q2       220936.0 218779.6 223092.3 217638.1 224233.8
2020 Q3       222120.2 219148.4 225091.9 217575.3 226665.0
2020 Q4       222210.8 218505.8 225915.9 216544.4 227877.2
2021 Q1       223246.2 218842.3 227650.2 216511.0 229981.5
2021 Q2       225177.8 219944.1 230411.5 217173.5 233182.1
2021 Q3       226362.0 220465.3 232258.7 217343.8 235380.2
2021 Q4       226452.6 219888.3 233016.9 216413.4 236491.9
2022 Q1       227488.1 220248.8 234727.3 216416.6 238559.5
2022 Q2       229419.6 221378.9 237460.3 217122.4 241716.8
2022 Q3       230603.8 221878.5 239329.1 217259.6 243948.0
2022 Q4       230694.4 221272.3 240116.5 216284.6 245104.3
2023 Q1       231729.9 221598.6 241861.1 216235.4 247224.3
2023 Q2       233661.4 222705.1 244617.7 216905.2 250417.6
2023 Q3       234845.6 223161.4 246529.8 216976.2 252715.1
2023 Q4       234936.3 222510.8 247361.7 215933.1 253939.4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(predictionHWAP_1)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="PIBQuarto---Descriptiva_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>El error cuadrático medio es</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>((Test<span class="sc">-</span>predictionHWAP_1<span class="sc">$</span>mean)<span class="sc">^</span><span class="dv">2</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 225265879</code></pre>
</div>
</div>
<p>Recordemos que el error cuadrático medio es alto debido a que los datos se encuentran en la escala original.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(<span class="at">x =</span> <span class="fu">time</span>(Test), <span class="at">y =</span> Test, <span class="at">type =</span> <span class="st">'scatter'</span>, <span class="at">mode =</span> <span class="st">'lines'</span>, <span class="at">color =</span> <span class="fu">I</span>(<span class="st">"red"</span>), <span class="at">name =</span> <span class="st">"PIB"</span>) <span class="sc">%&gt;%</span>   <span class="fu">add_trace</span>(<span class="at">y =</span> predictionHWAP_1<span class="sc">$</span>mean, <span class="at">mode =</span> <span class="st">'lines'</span>, <span class="at">line =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">'blue'</span>), <span class="at">name =</span> <span class="st">"Predicciones"</span>) <span class="sc">%&gt;%</span>   <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">'PIB vs Predicciones (Abril 2020-Diciembre 2023)'</span>,<span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">'Trimestre'</span>, <span class="at">rangeslider =</span> <span class="fu">list</span>(<span class="at">type =</span> <span class="st">'date'</span>)))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-8fb5e9ce66116e51d455" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-8fb5e9ce66116e51d455">{"x":{"visdat":{"3f28dea45a8":["function () ","plotlyVisDat"]},"cur_data":"3f28dea45a8","attrs":{"3f28dea45a8":{"x":[2020.25,2020.5,2020.75,2021,2021.25,2021.5,2021.75,2022,2022.25,2022.5,2022.75,2023,2023.25,2023.5,2023.75],"y":[182671.279204897,201846.81715103399,214377.49044971701,222122.233502016,216849.43983676101,228933.035104582,238338.29155664201,240084.04326739599,243197.794252858,245646.19980178899,243369.96267795601,246785.26105743201,243240.73191802701,244066.68231949699,244157.55145600101],"mode":"lines","name":"PIB","color":["red"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"3f28dea45a8.1":{"x":[2020.25,2020.5,2020.75,2021,2021.25,2021.5,2021.75,2022,2022.25,2022.5,2022.75,2023,2023.25,2023.5,2023.75],"y":[220935.97086175176,222120.16422947033,222210.80640474765,223246.23202525402,225177.78969265276,226361.98306037136,226452.62523564868,227488.05085615502,229419.60852355379,230603.80189127239,230694.44406654968,231729.86968705605,233661.42735445482,234845.62072217342,234936.26289745071],"mode":"lines","name":"Predicciones","color":["red"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","line":{"color":"blue"},"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"PIB vs Predicciones (Abril 2020-Diciembre 2023)","xaxis":{"domain":[0,1],"automargin":true,"title":"Trimestre","rangeslider":{"type":"date"}},"yaxis":{"domain":[0,1],"automargin":true,"title":[]},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[2020.25,2020.5,2020.75,2021,2021.25,2021.5,2021.75,2022,2022.25,2022.5,2022.75,2023,2023.25,2023.5,2023.75],"y":[182671.279204897,201846.81715103399,214377.49044971701,222122.233502016,216849.43983676101,228933.035104582,238338.29155664201,240084.04326739599,243197.794252858,245646.19980178899,243369.96267795601,246785.26105743201,243240.73191802701,244066.68231949699,244157.55145600101],"mode":"lines","name":"PIB","type":"scatter","marker":{"color":"rgba(255,0,0,1)","line":{"color":"rgba(255,0,0,1)"}},"textfont":{"color":"rgba(255,0,0,1)"},"error_y":{"color":"rgba(255,0,0,1)"},"error_x":{"color":"rgba(255,0,0,1)"},"line":{"color":"rgba(255,0,0,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2020.25,2020.5,2020.75,2021,2021.25,2021.5,2021.75,2022,2022.25,2022.5,2022.75,2023,2023.25,2023.5,2023.75],"y":[220935.97086175176,222120.16422947033,222210.80640474765,223246.23202525402,225177.78969265276,226361.98306037136,226452.62523564868,227488.05085615502,229419.60852355379,230603.80189127239,230694.44406654968,231729.86968705605,233661.42735445482,234845.62072217342,234936.26289745071],"mode":"lines","name":"Predicciones","type":"scatter","line":{"color":"blue"},"marker":{"color":"rgba(255,0,0,1)","line":{"color":"rgba(255,0,0,1)"}},"textfont":{"color":"rgba(255,0,0,1)"},"error_y":{"color":"rgba(255,0,0,1)"},"error_x":{"color":"rgba(255,0,0,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Usando objetos tsibble ahora</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>TrainOriginal<span class="ot">=</span><span class="fu">ts</span>(PIB3TS[<span class="dv">1</span><span class="sc">:</span><span class="dv">61</span>], <span class="at">start =</span> <span class="fu">c</span>(<span class="dv">2005</span>, <span class="dv">1</span>),<span class="at">frequency =</span> <span class="dv">4</span>) </span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>tsibbleBoxPIBTrain<span class="ot">&lt;-</span><span class="fu">as_tsibble</span>(TrainOriginal)</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>Ajuste1<span class="ot">=</span>tsibbleBoxPIBTrain<span class="sc">%&gt;%</span>   </span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">ETS</span>(value<span class="sc">~</span> <span class="fu">error</span>(<span class="st">"A"</span>)<span class="sc">+</span><span class="fu">trend</span>(<span class="st">"A"</span>)<span class="sc">+</span><span class="fu">season</span>(<span class="st">"A"</span>)))  </span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>Pronostico1<span class="ot">=</span>Ajuste1 <span class="sc">%&gt;%</span>   </span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>  fabletools<span class="sc">::</span><span class="fu">forecast</span>(<span class="at">h=</span><span class="dv">15</span>) </span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>Pronostico1  </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A fable: 15 x 4 [1Q]
# Key:     .model [1]
   .model                                        index              value  .mean
   &lt;chr&gt;                                         &lt;qtr&gt;             &lt;dist&gt;  &lt;dbl&gt;
 1 "ETS(value ~ error(\"A\") + trend(\"A\") +… 2020 Q2 N(220415, 2271400) 2.20e5
 2 "ETS(value ~ error(\"A\") + trend(\"A\") +… 2020 Q3 N(221585, 4919471) 2.22e5
 3 "ETS(value ~ error(\"A\") + trend(\"A\") +… 2020 Q4   N(222281, 8e+06) 2.22e5
 4 "ETS(value ~ error(\"A\") + trend(\"A\") +… 2021 Q1 N(223298, 1.1e+07) 2.23e5
 5 "ETS(value ~ error(\"A\") + trend(\"A\") +… 2021 Q2 N(224709, 1.5e+07) 2.25e5
 6 "ETS(value ~ error(\"A\") + trend(\"A\") +… 2021 Q3   N(225879, 2e+07) 2.26e5
 7 "ETS(value ~ error(\"A\") + trend(\"A\") +… 2021 Q4 N(226575, 2.5e+07) 2.27e5
 8 "ETS(value ~ error(\"A\") + trend(\"A\") +… 2022 Q1   N(227592, 3e+07) 2.28e5
 9 "ETS(value ~ error(\"A\") + trend(\"A\") +… 2022 Q2 N(229003, 3.6e+07) 2.29e5
10 "ETS(value ~ error(\"A\") + trend(\"A\") +… 2022 Q3 N(230173, 4.3e+07) 2.30e5
11 "ETS(value ~ error(\"A\") + trend(\"A\") +… 2022 Q4 N(230869, 5.1e+07) 2.31e5
12 "ETS(value ~ error(\"A\") + trend(\"A\") +… 2023 Q1 N(231886, 5.9e+07) 2.32e5
13 "ETS(value ~ error(\"A\") + trend(\"A\") +… 2023 Q2 N(233297, 6.7e+07) 2.33e5
14 "ETS(value ~ error(\"A\") + trend(\"A\") +… 2023 Q3 N(234467, 7.7e+07) 2.34e5
15 "ETS(value ~ error(\"A\") + trend(\"A\") +… 2023 Q4 N(235163, 8.7e+07) 2.35e5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>Pronostico1<span class="sc">%&gt;%</span><span class="fu">autoplot</span>(tsibbleBoxPIBTrain)<span class="sc">+</span><span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y=</span>.fitted),<span class="at">col=</span><span class="st">"red"</span>,<span class="at">data=</span><span class="fu">augment</span>(Ajuste1))<span class="sc">+</span><span class="fu">labs</span>(<span class="at">y=</span><span class="st">" "</span>,<span class="at">title=</span><span class="st">"Pronóstico u ajustados"</span>)<span class="sc">+</span><span class="fu">guides</span>(<span class="at">colour=</span><span class="st">"none"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="PIBQuarto---Descriptiva_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Raíz de error cuadrático medio</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>((Test<span class="sc">-</span>Pronostico1<span class="sc">$</span>.mean)<span class="sc">^</span><span class="dv">2</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 222314092</code></pre>
</div>
</div>
<section id="rolling" class="level4">
<h4 class="anchored" data-anchor-id="rolling">Rolling</h4>
<section id="rolling-manual" class="level5">
<h5 class="anchored" data-anchor-id="rolling-manual">Rolling manual</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>h<span class="ot">=</span><span class="dv">1</span>  </span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>lserie<span class="ot">=</span><span class="fu">length</span>(PIB3TS) </span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>ntrain<span class="ot">=</span><span class="fu">trunc</span>(<span class="fu">length</span>(PIB3TS)<span class="sc">*</span><span class="fl">0.80</span>)<span class="sc">+</span><span class="dv">1</span> <span class="do">##% del datos en el conjunto de entrenamiento es del 80%. </span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>ntrain </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 61</code></pre>
</div>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">time</span>(PIB3TS) </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        Qtr1    Qtr2    Qtr3    Qtr4
2005 2005.00 2005.25 2005.50 2005.75
2006 2006.00 2006.25 2006.50 2006.75
2007 2007.00 2007.25 2007.50 2007.75
2008 2008.00 2008.25 2008.50 2008.75
2009 2009.00 2009.25 2009.50 2009.75
2010 2010.00 2010.25 2010.50 2010.75
2011 2011.00 2011.25 2011.50 2011.75
2012 2012.00 2012.25 2012.50 2012.75
2013 2013.00 2013.25 2013.50 2013.75
2014 2014.00 2014.25 2014.50 2014.75
2015 2015.00 2015.25 2015.50 2015.75
2016 2016.00 2016.25 2016.50 2016.75
2017 2017.00 2017.25 2017.50 2017.75
2018 2018.00 2018.25 2018.50 2018.75
2019 2019.00 2019.25 2019.50 2019.75
2020 2020.00 2020.25 2020.50 2020.75
2021 2021.00 2021.25 2021.50 2021.75
2022 2022.00 2022.25 2022.50 2022.75
2023 2023.00 2023.25 2023.50 2023.75</code></pre>
</div>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">time</span>(PIB3TS)[ntrain]<span class="do">###Me entrega la ultima fecha de la posición ntrain #Partiendo la serie en entrenamiento y test </span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2020</code></pre>
</div>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>train<span class="ot">=</span><span class="fu">window</span>(PIB3TS,<span class="at">end=</span><span class="fu">time</span>(PIB3TS)[ntrain]) </span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>test<span class="ot">=</span><span class="fu">window</span>(PIB3TS,<span class="at">start=</span><span class="fu">time</span>(PIB3TS)[ntrain]<span class="sc">+</span><span class="dv">1</span><span class="sc">/</span><span class="dv">4</span>)<span class="do">##1/4 porque es la fracción que corresponde a un trimestre </span></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(train) </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 61</code></pre>
</div>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>ntest<span class="ot">=</span><span class="fu">length</span>(test) </span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>ntest <span class="do">##Me define el valor de origins, o de ventanas de rolling. </span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 15</code></pre>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>lserie <span class="do">### Comparar los valores </span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 76</code></pre>
</div>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>fchstepahe<span class="ot">=</span><span class="fu">matrix</span>(<span class="dv">0</span>,<span class="at">nrow=</span>ntest,<span class="at">ncol=</span>h) <span class="do">##Crea una Columna para los h-pasos adelante </span><span class="al">###</span><span class="do"> verval contiene los verdaderos valores de la serie en el conjunto de prueba con los que se compararán los pronósticos. </span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>verval<span class="ot">=</span><span class="fu">cbind</span>(test[<span class="dv">1</span><span class="sc">:</span>ntest]) <span class="co">#for(j in 2:h){  # verval=cbind(verval,c(test[j:ntest],rep(NA,j-1))) ##### Este for sobra porque sólo hacemos predicción un paso adelante #}  #verval=cbind(test[1:ntest],c(test[2:ntest],NA),c(test[3:ntest],NA,NA)) ####Ajuste del modelo con los datos de entrenamiento </span></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>HWAP_train<span class="ot">=</span>stats<span class="sc">::</span><span class="fu">HoltWinters</span>(train,<span class="at">seasonal=</span><span class="st">"additive"</span>) </span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>HWAP_train<span class="sc">$</span>alpha </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    alpha 
0.8704311 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>HWAP_train<span class="sc">$</span>beta </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      beta 
0.08945198 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>HWAP_train<span class="sc">$</span>gamma <span class="do">###Observación: Note que que esos son las estimaciones de los parámetros de suavizamiento. Se puede también hacer una grilla de valores para explorar si hay unos valores mejores. # por ejemplo como sigue: </span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>gamma 
    1 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(utils) </span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>suav_inputs<span class="ot">=</span><span class="fu">cbind</span>(<span class="fu">seq</span>(<span class="fl">0.001</span>,<span class="fl">0.999</span>,<span class="fl">0.1</span>),<span class="fu">seq</span>(<span class="fl">0.001</span>,<span class="fl">0.999</span>,<span class="fl">0.1</span>),<span class="fu">seq</span>(<span class="fl">0.001</span>,<span class="fl">0.999</span>,<span class="fl">0.1</span>)) </span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(suav_inputs)<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">"alpha"</span>,<span class="st">"beta"</span>,<span class="st">"gamma"</span>) </span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>suav_inputs_tbl<span class="ot">=</span>tibble<span class="sc">::</span><span class="fu">as_tibble</span>(suav_inputs) </span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>grilla_suav<span class="ot">=</span><span class="fu">expand.grid</span>(<span class="at">alpha=</span>suav_inputs_tbl<span class="sc">$</span>alpha,<span class="at">beta=</span>suav_inputs_tbl<span class="sc">$</span>beta,<span class="at">gamma=</span>suav_inputs_tbl<span class="sc">$</span>gamma) <span class="do">##Grilla de Valores ####Se crean las ventanas de rolling y se obtiene los h-pronósticos para cada ventana(hay ntest posibles ventanas) </span></span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>(ntest)){x<span class="ot">=</span><span class="fu">window</span>(PIB3TS,<span class="at">end=</span><span class="fu">time</span>(PIB3TS)[ntrain]<span class="sc">+</span>(i<span class="dv">-1</span>)<span class="sc">/</span><span class="dv">12</span>)   </span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">length</span>(x))   </span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a>refit<span class="ot">=</span>stats<span class="sc">::</span><span class="fu">HoltWinters</span>(x,<span class="at">seasonal=</span><span class="cn">NULL</span>,<span class="at">alpha=</span>HWAP_train<span class="sc">$</span>alpha,<span class="at">bet=</span>HWAP_train<span class="sc">$</span>beta,<span class="at">gamma=</span>HWAP_train<span class="sc">$</span>gamma)     </span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a>  fchstepahe[i,]<span class="ot">=</span><span class="fu">as.numeric</span>(forecast<span class="sc">::</span><span class="fu">forecast</span>(refit,<span class="at">h=</span>h)<span class="sc">$</span>mean) } </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 61
[1] 61
[1] 61
[1] 62
[1] 62
[1] 62
[1] 63
[1] 63
[1] 63
[1] 64
[1] 64
[1] 64
[1] 65
[1] 65
[1] 65</code></pre>
</div>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>fchstepahe  </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          [,1]
 [1,] 220936.0
 [2,] 220936.0
 [3,] 220936.0
 [4,] 185834.0
 [5,] 185834.0
 [6,] 185834.0
 [7,] 198130.1
 [8,] 198130.1
 [9,] 198130.1
[10,] 212840.2
[11,] 212840.2
[12,] 212840.2
[13,] 218148.4
[14,] 218148.4
[15,] 218148.4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>errores_pred<span class="ot">=</span>verval <span class="sc">-</span>fchstepahe <span class="do">##Observación: debo devolver los pronósticos y los verdaderos valores a la escala original si es necesario. </span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>ECM<span class="ot">=</span><span class="fu">apply</span>(errores_pred<span class="sc">^</span><span class="dv">2</span>,<span class="at">MARGIN =</span> <span class="dv">2</span>,mean,<span class="at">na.rm=</span><span class="cn">TRUE</span>) <span class="do">##Acá se computa la medida de precisión del pronóstico(en este caso ECM). </span></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>RECM<span class="ot">=</span><span class="fu">sqrt</span>(ECM) <span class="do">##Se le saca raíz  #RECM ##se lee: Primera fila RECM 1-paso adelante y así sucesivamente. </span></span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>ECM</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1103616582</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(<span class="at">x =</span> <span class="fu">time</span>(test), <span class="at">y =</span> test, <span class="at">type =</span> <span class="st">'scatter'</span>, <span class="at">mode =</span> <span class="st">'lines'</span>, <span class="at">color =</span> <span class="fu">I</span>(<span class="st">"red"</span>), <span class="at">name =</span> <span class="st">"PIB"</span>) <span class="sc">%&gt;%</span>   </span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_trace</span>(<span class="at">y =</span> fchstepahe, <span class="at">mode =</span> <span class="st">'lines'</span>, <span class="at">line =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">'blue'</span>), <span class="at">name =</span> <span class="st">"Predicciones"</span>) <span class="sc">%&gt;%</span>   </span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">'PIB vs Predicciones (Abril 2020-Diciembre 2023)'</span>,          <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">'Trimestre'</span>, <span class="at">rangeslider =</span> <span class="fu">list</span>(<span class="at">type =</span> <span class="st">'date'</span>)))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-70a1a0e36ad937c5c096" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-70a1a0e36ad937c5c096">{"x":{"visdat":{"3f285adcbd9":["function () ","plotlyVisDat"]},"cur_data":"3f285adcbd9","attrs":{"3f285adcbd9":{"x":[2020.25,2020.5,2020.75,2021,2021.25,2021.5,2021.75,2022,2022.25,2022.5,2022.75,2023,2023.25,2023.5,2023.75],"y":[182671.279204897,201846.81715103399,214377.49044971701,222122.233502016,216849.43983676101,228933.035104582,238338.29155664201,240084.04326739599,243197.794252858,245646.19980178899,243369.96267795601,246785.26105743201,243240.73191802701,244066.68231949699,244157.55145600101],"mode":"lines","name":"PIB","color":["red"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"3f285adcbd9.1":{"x":[2020.25,2020.5,2020.75,2021,2021.25,2021.5,2021.75,2022,2022.25,2022.5,2022.75,2023,2023.25,2023.5,2023.75],"y":[[220935.97086175176],[220935.97086175176],[220935.97086175176],[185834.02813059062],[185834.02813059062],[185834.02813059062],[198130.12746916694],[198130.12746916694],[198130.12746916694],[212840.23944063872],[212840.23944063872],[212840.23944063872],[218148.40933701192],[218148.40933701192],[218148.40933701192]],"mode":"lines","name":"Predicciones","color":["red"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","line":{"color":"blue"},"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"PIB vs Predicciones (Abril 2020-Diciembre 2023)","xaxis":{"domain":[0,1],"automargin":true,"title":"Trimestre","rangeslider":{"type":"date"}},"yaxis":{"domain":[0,1],"automargin":true,"title":[]},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[2020.25,2020.5,2020.75,2021,2021.25,2021.5,2021.75,2022,2022.25,2022.5,2022.75,2023,2023.25,2023.5,2023.75],"y":[182671.279204897,201846.81715103399,214377.49044971701,222122.233502016,216849.43983676101,228933.035104582,238338.29155664201,240084.04326739599,243197.794252858,245646.19980178899,243369.96267795601,246785.26105743201,243240.73191802701,244066.68231949699,244157.55145600101],"mode":"lines","name":"PIB","type":"scatter","marker":{"color":"rgba(255,0,0,1)","line":{"color":"rgba(255,0,0,1)"}},"textfont":{"color":"rgba(255,0,0,1)"},"error_y":{"color":"rgba(255,0,0,1)"},"error_x":{"color":"rgba(255,0,0,1)"},"line":{"color":"rgba(255,0,0,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2020.25,2020.5,2020.75,2021,2021.25,2021.5,2021.75,2022,2022.25,2022.5,2022.75,2023,2023.25,2023.5,2023.75],"y":[220935.97086175176,220935.97086175176,220935.97086175176,185834.02813059062,185834.02813059062,185834.02813059062,198130.12746916694,198130.12746916694,198130.12746916694,212840.23944063872,212840.23944063872,212840.23944063872,218148.40933701192,218148.40933701192,218148.40933701192],"mode":"lines","name":"Predicciones","type":"scatter","line":{"color":"blue"},"marker":{"color":"rgba(255,0,0,1)","line":{"color":"rgba(255,0,0,1)"}},"textfont":{"color":"rgba(255,0,0,1)"},"error_y":{"color":"rgba(255,0,0,1)"},"error_x":{"color":"rgba(255,0,0,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="rolling-usando-la-función" class="level5">
<h5 class="anchored" data-anchor-id="rolling-usando-la-función">Rolling usando la función</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forecast) </span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(greybox) </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Registered S3 method overwritten by 'greybox':
  method     from
  print.pcor lava</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Package "greybox", v2.0.1 loaded.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'greybox'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:fabletools':

    MAE, MAPE, MASE, ME, MPE, MSE, RMSSE</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:tsibble':

    measures</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:lubridate':

    hm</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:tidyr':

    spread</code></pre>
</div>
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>HWAP_train<span class="ot">=</span>stats<span class="sc">::</span><span class="fu">HoltWinters</span>(train,<span class="at">seasonal=</span><span class="cn">NULL</span>)   </span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>h<span class="ot">=</span><span class="dv">1</span> </span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>ourCallETS <span class="ot">&lt;-</span> <span class="st">"forecast::forecast(stats::HoltWinters(x=data,alpha=HWAP_train$alpha,beta=HWAP_train$beta,gamma=HWAP_train$gamma),h=h)"</span> <span class="do">###Note que x=data es solo un argumento indeterminado. </span></span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a>ourValueETS <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"mean"</span>,<span class="st">"lower"</span>,<span class="st">"upper"</span>) </span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a>origins<span class="ot">=</span>ntest   <span class="do">##número de rolling windows </span></span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a>Valoresretornados1 <span class="ot">&lt;-</span> <span class="fu">ro</span>(PIB3TS, <span class="at">h=</span>h, <span class="at">origins=</span>origins, <span class="at">call=</span>ourCallETS, <span class="at">value=</span>ourValueETS,<span class="at">ci=</span><span class="cn">FALSE</span>,<span class="at">co=</span><span class="cn">FALSE</span>) </span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a><span class="fu">t</span>(Valoresretornados1<span class="sc">$</span>holdout)<span class="do">## Permiten verificar los verdaderos valores h-pasos adelante.  </span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               h1
origin62 182671.3
origin63 201846.8
origin64 214377.5
origin65 222122.2
origin66 216849.4
origin67 228933.0
origin68 238338.3
origin69 240084.0
origin70 243197.8
origin71 245646.2
origin72 243370.0
origin73 246785.3
origin74 243240.7
origin75 244066.7
origin76 244157.6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">t</span>(Valoresretornados1<span class="sc">$</span>mean) </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               h1
origin62 220936.0
origin63 185834.0
origin64 198130.1
origin65 212840.2
origin66 218148.4
origin67 225388.7
origin68 229024.8
origin69 238419.7
origin70 236755.8
origin71 252993.9
origin72 248681.0
origin73 244000.7
origin74 243663.7
origin75 251337.8
origin76 246559.7</code></pre>
</div>
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>((Valoresretornados1<span class="sc">$</span>holdout <span class="sc">-</span>Valoresretornados1<span class="sc">$</span>mean)<span class="sc">^</span><span class="dv">2</span>,<span class="dv">1</span>,mean,<span class="at">na.rm=</span><span class="cn">TRUE</span>) <span class="do">### Se calcula el error cuadrático medio de predicción  </span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       h1 
157650373 </code></pre>
</div>
</div>
</section>
</section>
<section id="suavizamiento-exponencial-utilizando-la-librería-modeltime" class="level3">
<h3 class="anchored" data-anchor-id="suavizamiento-exponencial-utilizando-la-librería-modeltime">Suavizamiento exponencial utilizando la librería modeltime</h3>
<p>El procedimiento inicia con la creación de un objeto tibble de la serie transformada.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>TibPIB<span class="ot">&lt;-</span><span class="fu">as_tibble</span>(PIB3TSibble) </span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>TibPIB<span class="sc">$</span>Fecha<span class="ot">&lt;-</span><span class="fu">as.Date</span>(TibPIB<span class="sc">$</span>Fecha) </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Posteriormente se divide la serie en conjunto de entrenamiento y de prueba.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>Particion<span class="ot">=</span>timetk<span class="sc">::</span><span class="fu">time_series_split</span>(TibPIB,<span class="at">date_var=</span>Fecha,<span class="at">assess =</span> <span class="dv">4</span>,<span class="at">cumulative =</span> <span class="cn">TRUE</span>)<span class="co">#En este caso, al decir assess=4 indica que las últimas 4 observaciones serán utilizadas como conjunto de prueba </span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>Particion<span class="sc">%&gt;%</span> </span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tk_time_series_cv_plan</span>()<span class="sc">%&gt;%</span>   </span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_time_series_cv_plan</span>(Fecha,PIB) </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-7c935b6cabe6f3cea1da" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-7c935b6cabe6f3cea1da">{"x":{"data":[{"x":["2005-01-01","2005-04-01","2005-07-01","2005-10-01","2006-01-01","2006-04-01","2006-07-01","2006-10-01","2007-01-01","2007-04-01","2007-07-01","2007-10-01","2008-01-01","2008-04-01","2008-07-01","2008-10-01","2009-01-01","2009-04-01","2009-07-01","2009-10-01","2010-01-01","2010-04-01","2010-07-01","2010-10-01","2011-01-01","2011-04-01","2011-07-01","2011-10-01","2012-01-01","2012-04-01","2012-07-01","2012-10-01","2013-01-01","2013-04-01","2013-07-01","2013-10-01","2014-01-01","2014-04-01","2014-07-01","2014-10-01","2015-01-01","2015-04-01","2015-07-01","2015-10-01","2016-01-01","2016-04-01","2016-07-01","2016-10-01","2017-01-01","2017-04-01","2017-07-01","2017-10-01","2018-01-01","2018-04-01","2018-07-01","2018-10-01","2019-01-01","2019-04-01","2019-07-01","2019-10-01","2020-01-01","2020-04-01","2020-07-01","2020-10-01","2021-01-01","2021-04-01","2021-07-01","2021-10-01","2022-01-01","2022-04-01","2022-07-01","2022-10-01"],"y":[126125.790850045,128871.539452182,128599.726107945,131255.94347370201,134234.01358794299,135707.55791452501,138463.56652532599,141029.86197220799,143333.19357594699,144873.706349068,147970.382545325,150279.71752966,150671.656974171,151427.83278930199,152844.15441552299,150769.355821003,150869.15385853901,152212.085496983,153922.187590018,155612.57305446101,156676.06451802299,158933.49660038401,160397.55175458401,164143.88712700899,167191.45719997,169465.15426836599,173340.340965449,174631.04756621501,177252.095049803,177496.09745117399,177258.63484234799,179408.172656674,181495.600838146,187202.11193552901,188396.73195553801,190844.55527078701,193625.433772305,193703.875145567,196329.59031789401,197930.10076423601,199315.25482117399,200450.36873025601,203018.47407064901,201907.90237792101,204357.80308589799,204811.12290935899,205774.21399403,206545.86001071299,206777.55592230099,207407.74762712,209086.25485896401,209384.441591615,210421.58731912199,213111.95825521101,215063.77884092301,215410.675584743,217863.801212416,219554.72109193099,221838.84219456301,221966.63550109,219004.41319435299,182671.279204897,201846.81715103399,214377.49044971701,222122.233502016,216849.43983676101,228933.035104582,238338.29155664201,240084.04326739599,243197.794252858,245646.19980178899,243369.96267795601],"text":["Fecha: 2005-01-01<br />.value: 126125.8<br />.color_mod: training<br />.color_mod: training","Fecha: 2005-04-01<br />.value: 128871.5<br />.color_mod: training<br />.color_mod: training","Fecha: 2005-07-01<br />.value: 128599.7<br />.color_mod: training<br />.color_mod: training","Fecha: 2005-10-01<br />.value: 131255.9<br />.color_mod: training<br />.color_mod: training","Fecha: 2006-01-01<br />.value: 134234.0<br />.color_mod: training<br />.color_mod: training","Fecha: 2006-04-01<br />.value: 135707.6<br />.color_mod: training<br />.color_mod: training","Fecha: 2006-07-01<br />.value: 138463.6<br />.color_mod: training<br />.color_mod: training","Fecha: 2006-10-01<br />.value: 141029.9<br />.color_mod: training<br />.color_mod: training","Fecha: 2007-01-01<br />.value: 143333.2<br />.color_mod: training<br />.color_mod: training","Fecha: 2007-04-01<br />.value: 144873.7<br />.color_mod: training<br />.color_mod: training","Fecha: 2007-07-01<br />.value: 147970.4<br />.color_mod: training<br />.color_mod: training","Fecha: 2007-10-01<br />.value: 150279.7<br />.color_mod: training<br />.color_mod: training","Fecha: 2008-01-01<br />.value: 150671.7<br />.color_mod: training<br />.color_mod: training","Fecha: 2008-04-01<br />.value: 151427.8<br />.color_mod: training<br />.color_mod: training","Fecha: 2008-07-01<br />.value: 152844.2<br />.color_mod: training<br />.color_mod: training","Fecha: 2008-10-01<br />.value: 150769.4<br />.color_mod: training<br />.color_mod: training","Fecha: 2009-01-01<br />.value: 150869.2<br />.color_mod: training<br />.color_mod: training","Fecha: 2009-04-01<br />.value: 152212.1<br />.color_mod: training<br />.color_mod: training","Fecha: 2009-07-01<br />.value: 153922.2<br />.color_mod: training<br />.color_mod: training","Fecha: 2009-10-01<br />.value: 155612.6<br />.color_mod: training<br />.color_mod: training","Fecha: 2010-01-01<br />.value: 156676.1<br />.color_mod: training<br />.color_mod: training","Fecha: 2010-04-01<br />.value: 158933.5<br />.color_mod: training<br />.color_mod: training","Fecha: 2010-07-01<br />.value: 160397.6<br />.color_mod: training<br />.color_mod: training","Fecha: 2010-10-01<br />.value: 164143.9<br />.color_mod: training<br />.color_mod: training","Fecha: 2011-01-01<br />.value: 167191.5<br />.color_mod: training<br />.color_mod: training","Fecha: 2011-04-01<br />.value: 169465.2<br />.color_mod: training<br />.color_mod: training","Fecha: 2011-07-01<br />.value: 173340.3<br />.color_mod: training<br />.color_mod: training","Fecha: 2011-10-01<br />.value: 174631.0<br />.color_mod: training<br />.color_mod: training","Fecha: 2012-01-01<br />.value: 177252.1<br />.color_mod: training<br />.color_mod: training","Fecha: 2012-04-01<br />.value: 177496.1<br />.color_mod: training<br />.color_mod: training","Fecha: 2012-07-01<br />.value: 177258.6<br />.color_mod: training<br />.color_mod: training","Fecha: 2012-10-01<br />.value: 179408.2<br />.color_mod: training<br />.color_mod: training","Fecha: 2013-01-01<br />.value: 181495.6<br />.color_mod: training<br />.color_mod: training","Fecha: 2013-04-01<br />.value: 187202.1<br />.color_mod: training<br />.color_mod: training","Fecha: 2013-07-01<br />.value: 188396.7<br />.color_mod: training<br />.color_mod: training","Fecha: 2013-10-01<br />.value: 190844.6<br />.color_mod: training<br />.color_mod: training","Fecha: 2014-01-01<br />.value: 193625.4<br />.color_mod: training<br />.color_mod: training","Fecha: 2014-04-01<br />.value: 193703.9<br />.color_mod: training<br />.color_mod: training","Fecha: 2014-07-01<br />.value: 196329.6<br />.color_mod: training<br />.color_mod: training","Fecha: 2014-10-01<br />.value: 197930.1<br />.color_mod: training<br />.color_mod: training","Fecha: 2015-01-01<br />.value: 199315.3<br />.color_mod: training<br />.color_mod: training","Fecha: 2015-04-01<br />.value: 200450.4<br />.color_mod: training<br />.color_mod: training","Fecha: 2015-07-01<br />.value: 203018.5<br />.color_mod: training<br />.color_mod: training","Fecha: 2015-10-01<br />.value: 201907.9<br />.color_mod: training<br />.color_mod: training","Fecha: 2016-01-01<br />.value: 204357.8<br />.color_mod: training<br />.color_mod: training","Fecha: 2016-04-01<br />.value: 204811.1<br />.color_mod: training<br />.color_mod: training","Fecha: 2016-07-01<br />.value: 205774.2<br />.color_mod: training<br />.color_mod: training","Fecha: 2016-10-01<br />.value: 206545.9<br />.color_mod: training<br />.color_mod: training","Fecha: 2017-01-01<br />.value: 206777.6<br />.color_mod: training<br />.color_mod: training","Fecha: 2017-04-01<br />.value: 207407.7<br />.color_mod: training<br />.color_mod: training","Fecha: 2017-07-01<br />.value: 209086.3<br />.color_mod: training<br />.color_mod: training","Fecha: 2017-10-01<br />.value: 209384.4<br />.color_mod: training<br />.color_mod: training","Fecha: 2018-01-01<br />.value: 210421.6<br />.color_mod: training<br />.color_mod: training","Fecha: 2018-04-01<br />.value: 213112.0<br />.color_mod: training<br />.color_mod: training","Fecha: 2018-07-01<br />.value: 215063.8<br />.color_mod: training<br />.color_mod: training","Fecha: 2018-10-01<br />.value: 215410.7<br />.color_mod: training<br />.color_mod: training","Fecha: 2019-01-01<br />.value: 217863.8<br />.color_mod: training<br />.color_mod: training","Fecha: 2019-04-01<br />.value: 219554.7<br />.color_mod: training<br />.color_mod: training","Fecha: 2019-07-01<br />.value: 221838.8<br />.color_mod: training<br />.color_mod: training","Fecha: 2019-10-01<br />.value: 221966.6<br />.color_mod: training<br />.color_mod: training","Fecha: 2020-01-01<br />.value: 219004.4<br />.color_mod: training<br />.color_mod: training","Fecha: 2020-04-01<br />.value: 182671.3<br />.color_mod: training<br />.color_mod: training","Fecha: 2020-07-01<br />.value: 201846.8<br />.color_mod: training<br />.color_mod: training","Fecha: 2020-10-01<br />.value: 214377.5<br />.color_mod: training<br />.color_mod: training","Fecha: 2021-01-01<br />.value: 222122.2<br />.color_mod: training<br />.color_mod: training","Fecha: 2021-04-01<br />.value: 216849.4<br />.color_mod: training<br />.color_mod: training","Fecha: 2021-07-01<br />.value: 228933.0<br />.color_mod: training<br />.color_mod: training","Fecha: 2021-10-01<br />.value: 238338.3<br />.color_mod: training<br />.color_mod: training","Fecha: 2022-01-01<br />.value: 240084.0<br />.color_mod: training<br />.color_mod: training","Fecha: 2022-04-01<br />.value: 243197.8<br />.color_mod: training<br />.color_mod: training","Fecha: 2022-07-01<br />.value: 245646.2<br />.color_mod: training<br />.color_mod: training","Fecha: 2022-10-01<br />.value: 243370.0<br />.color_mod: training<br />.color_mod: training"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(44,62,80,1)","dash":"solid"},"hoveron":"points","name":"training","legendgroup":"training","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":["2023-01-01","2023-04-01","2023-07-01","2023-10-01"],"y":[246785.26105743201,243240.73191802701,244066.68231949699,244157.55145600101],"text":["Fecha: 2023-01-01<br />.value: 246785.3<br />.color_mod: testing<br />.color_mod: testing","Fecha: 2023-04-01<br />.value: 243240.7<br />.color_mod: testing<br />.color_mod: testing","Fecha: 2023-07-01<br />.value: 244066.7<br />.color_mod: testing<br />.color_mod: testing","Fecha: 2023-10-01<br />.value: 244157.6<br />.color_mod: testing<br />.color_mod: testing"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(227,26,28,1)","dash":"solid"},"hoveron":"points","name":"testing","legendgroup":"testing","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":55.452054794520549,"r":7.3059360730593621,"b":25.570776255707766,"l":46.027397260273986},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(44,62,80,1)","family":"","size":14.611872146118724},"title":{"text":"Time Series Cross Validation Plan","font":{"color":"rgba(44,62,80,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"date","autorange":true,"range":["2004-01-24","2024-09-07"],"tickmode":"auto","ticktext":["2005","2010","2015","2020"],"tickvals":[12784,14610,16436,18262],"categoryorder":"array","categoryarray":["2005","2010","2015","2020"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.6529680365296811,"tickwidth":0.22139200221392005,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392005,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":true,"range":[120092.81733967565,252818.23456780135],"tickmode":"auto","ticktext":["125000","150000","175000","200000","225000","250000"],"tickvals":[125000,150000,175000,200000,225000,250000],"categoryorder":"array","categoryarray":["125000","150000","175000","200000","225000","250000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.6529680365296811,"tickwidth":0.22139200221392005,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392005,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(44,62,80,1)","width":0.33208800332088001,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1},{"type":"rect","fillcolor":"rgba(44,62,80,1)","line":{"color":"rgba(44,62,80,1)","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":24.973017849730184,"yanchor":1,"ysizemode":"pixel"}],"annotations":[{"text":"Slice1","x":0.5,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.68949771689498},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(44,62,80,1)","family":"","size":11.68949771689498},"title":{"text":"Legend","font":{"color":"rgba(44,62,80,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"3f287b873417":{"x":{},"y":{},"colour":{},"type":"scatter"}},"cur_data":"3f287b873417","visdat":{"3f287b873417":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Ajustando el modelo</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="co">#ModeloEWMA&lt;-modeltime::exp_smoothing(error="additive",trend="additive",season=NULL )%&gt;%</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#set_engine("ets")%&gt;%</span></span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">#fit(PIB ~ Fecha,data=training(Particion))   </span></span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a><span class="co">#modeltime_table(ModeloEWMA) %&gt;%   </span></span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#modeltime_calibrate(testing(Particion))%&gt;%   </span></span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#modeltime_forecast(new_data = testing(Particion), actual_data = TibPIB)%&gt;%   </span></span>
<span id="cb112-7"><a href="#cb112-7" aria-hidden="true" tabindex="-1"></a>  <span class="co">#plot_modeltime_forecast(.conf_interval_fill = "lightblue")</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="do">##Se crea un objeto de pronóstico con los valores sobre el conjunto de prueba. </span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="co">#PronosticoEWMA&lt;-modeltime_table(ModeloEWMA) %&gt;%</span></span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">#modeltime_calibrate(testing(Particion))%&gt;%</span></span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#modeltime_forecast(new_data = testing(Particion),actual_data = TibPIB)       </span></span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a><span class="co">#PronosticoEWMA</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="do">####Los mismo que hicimos anteriormente pero ahora creando objetos  </span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Modeltime  </span></span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a><span class="co">#model_tbl&lt;-modeltime_table(ModeloEWMA) </span></span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Calibración    </span></span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a><span class="co">#calibration_tbl&lt;-model_tbl%&gt;%</span></span>
<span id="cb114-6"><a href="#cb114-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#modeltime_calibrate(testing(Particion)) </span></span>
<span id="cb114-7"><a href="#cb114-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Pronóstico sobre el conjunto de prueba   </span></span>
<span id="cb114-8"><a href="#cb114-8" aria-hidden="true" tabindex="-1"></a><span class="co">#calibration_tbl%&gt;%</span></span>
<span id="cb114-9"><a href="#cb114-9" aria-hidden="true" tabindex="-1"></a>  <span class="co">#modeltime_forecast(new_data = testing(Particion),actual_data = TibPIB)   </span></span>
<span id="cb114-10"><a href="#cb114-10" aria-hidden="true" tabindex="-1"></a><span class="do">###Residuales    </span></span>
<span id="cb114-11"><a href="#cb114-11" aria-hidden="true" tabindex="-1"></a><span class="co">#residuales_ajuste&lt;-model_tbl%&gt;%   </span></span>
<span id="cb114-12"><a href="#cb114-12" aria-hidden="true" tabindex="-1"></a>  <span class="co">#modeltime_calibrate(new_data=training(Particion))%&gt;%   </span></span>
<span id="cb114-13"><a href="#cb114-13" aria-hidden="true" tabindex="-1"></a>  <span class="co">#modeltime_residuals()  </span></span>
<span id="cb114-14"><a href="#cb114-14" aria-hidden="true" tabindex="-1"></a><span class="co">#residuales_ajuste%&gt;%plot_modeltime_residuals( .type="timeplot", .interactive = TRUE)    </span></span>
<span id="cb114-15"><a href="#cb114-15" aria-hidden="true" tabindex="-1"></a><span class="do">### Precisión de los pronósticos   </span></span>
<span id="cb114-16"><a href="#cb114-16" aria-hidden="true" tabindex="-1"></a><span class="co">#calibration_tbl%&gt;%     </span></span>
<span id="cb114-17"><a href="#cb114-17" aria-hidden="true" tabindex="-1"></a>  <span class="co">#modeltime_accuracy()      </span></span>
<span id="cb114-18"><a href="#cb114-18" aria-hidden="true" tabindex="-1"></a><span class="do">## Re-ajuste y predicción de valores futuros </span></span>
<span id="cb114-19"><a href="#cb114-19" aria-hidden="true" tabindex="-1"></a><span class="co">#re_ajuste&lt;-calibration_tbl%&gt;%   </span></span>
<span id="cb114-20"><a href="#cb114-20" aria-hidden="true" tabindex="-1"></a>  <span class="co">#modeltime_refit(data=TibPIB)  </span></span>
<span id="cb114-21"><a href="#cb114-21" aria-hidden="true" tabindex="-1"></a><span class="co">#re_ajuste%&gt;%   </span></span>
<span id="cb114-22"><a href="#cb114-22" aria-hidden="true" tabindex="-1"></a>  <span class="co">#modeltime_forecast(h=4,actual_data = TibPIB)%&gt;%   </span></span>
<span id="cb114-23"><a href="#cb114-23" aria-hidden="true" tabindex="-1"></a>  <span class="co">#plot_modeltime_forecast()  </span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiado");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiado");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>